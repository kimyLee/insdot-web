(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["art"],{"029f":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),r=n("836c"),o=n.n(r);const i=e=>(Object(a["M"])("data-v-16d6f575"),e=e(),Object(a["K"])(),e),s={class:"project-list page"},l=i(()=>Object(a["m"])("div",{class:"logo"},null,-1)),c=i(()=>Object(a["m"])("img",{class:"joyo-icon",src:o.a},null,-1)),u={class:"joyo-icon",src:o.a},_={class:"connect-text"},p={class:"head-btn",for:"listFileInput"},d=i(()=>Object(a["m"])("input",{id:"listFileInput",hidden:"",type:"file",accept:".jo"},null,-1)),O=Object(a["n"])(" 官网 "),T=Object(a["n"])(" 文档 "),E=Object(a["n"])(" 联系我们 "),m=Object(a["n"])(" 更多 "),b={class:"container"},A={class:"warning-tip"},h=["onClick"],R={class:"content"},I={class:"title"},v={class:"bottom-icon del-icon"};function g(e,t,n,r,o,i){const g=Object(a["S"])("a-badge"),N=Object(a["S"])("a-button"),S=Object(a["S"])("question-circle-outlined"),f=Object(a["S"])("PlusOutlined"),L=Object(a["S"])("delivered-procedure-outlined"),j=Object(a["S"])("vertical-align-bottom-outlined"),$=Object(a["S"])("a-popconfirm"),C=Object(a["S"])("a-menu-item"),y=Object(a["S"])("a-menu"),M=Object(a["S"])("DownOutlined"),G=Object(a["S"])("a-dropdown"),D=Object(a["S"])("HomeOutlined"),k=Object(a["S"])("FileSearchOutlined"),B=Object(a["S"])("MessageOutlined"),U=Object(a["S"])("HeaderNav"),P=Object(a["S"])("a-alert"),F=Object(a["S"])("HighlightOutlined"),V=Object(a["S"])("delete-outlined"),x=Object(a["S"])("a-input"),w=Object(a["S"])("a-modal"),Y=Object(a["S"])("UpdateProcess"),H=Object(a["S"])("ConnectTip");return Object(a["J"])(),Object(a["l"])("div",s,[Object(a["o"])(U,{"sub-title":e.$t(e.LANG.HOME_HEADER.SUBTITLE)},{default:Object(a["eb"])(()=>[l,Object(a["o"])(N,{shape:"circle",class:"header-btn",onClick:t[0]||(t[0]=t=>e.visibleOfJOYOUpdate=!0)},{default:Object(a["eb"])(()=>[Object(a["fb"])(Object(a["o"])(g,{dot:"","number-style":{width:"12px",height:"12px"},offset:[3,0],color:"yellow"},{default:Object(a["eb"])(()=>[c]),_:1},512),[[a["bb"],e.hasNewVersion]]),Object(a["fb"])(Object(a["m"])("img",u,null,512),[[a["bb"],!e.hasNewVersion]])]),_:1}),Object(a["o"])(N,{key:"2",class:"header-btn",onClick:e.connectJoyo},{default:Object(a["eb"])(()=>[Object(a["m"])("span",_,[Object(a["m"])("span",{class:Object(a["z"])(["connect-dot",{active:e.connectStatus}])},null,2),Object(a["n"])(" "+Object(a["V"])(e.connectStatus?e.$t(e.LANG.BLOCKLY_MENU.DISCONNECT):e.$t(e.LANG.BLOCKLY_MENU.CONNECT)),1)]),Object(a["o"])(S,{style:{fontSize:"20px",color:"#aaa","vertical-align":"middle"},onClick:t[1]||(t[1]=Object(a["gb"])(t=>e.visibleOfConnectTip=!0,["stop"]))})]),_:1},8,["onClick"]),Object(a["o"])(N,{key:"2",class:"header-btn",onClick:Object(a["gb"])(e.createProjectPop,["stop"])},{icon:Object(a["eb"])(()=>[Object(a["o"])(f)]),default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.HOME_HEADER.NEW_GAME))+" ",1)]),_:1},8,["onClick"]),Object(a["m"])("label",p,[Object(a["o"])(L),Object(a["n"])(" "+Object(a["V"])(e.$t(e.LANG.HOME_HEADER.IMPORT))+" ",1),d]),Object(a["o"])($,{title:e.$t(e.LANG.HOME_HEADER.EXPORT_CONFIRM),"ok-text":e.$t(e.LANG.COMMON.CONFIRM),placement:"bottomRight","cancel-text":e.$t(e.LANG.COMMON.CANCEL),onConfirm:e.exportAllProgram},{default:Object(a["eb"])(()=>[Object(a["o"])(N,{class:"header-btn"},{default:Object(a["eb"])(()=>[Object(a["o"])(j,{class:"bottom-icon download-icon"}),Object(a["n"])(" "+Object(a["V"])(e.$t(e.LANG.HOME_HEADER.EXPORT_ALL)),1)]),_:1})]),_:1},8,["title","ok-text","cancel-text","onConfirm"]),Object(a["o"])(G,null,{overlay:Object(a["eb"])(()=>[Object(a["o"])(y,null,{default:Object(a["eb"])(()=>[Object(a["o"])(C,{key:"1",onClick:t[2]||(t[2]=t=>e.setLocale(e.LocaleEnum.ZH))},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.HOME_HEADER.ZH)),1)]),_:1}),Object(a["o"])(C,{key:"2",onClick:t[3]||(t[3]=t=>e.setLocale(e.LocaleEnum.EN))},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.HOME_HEADER.EN)),1)]),_:1})]),_:1})]),default:Object(a["eb"])(()=>[Object(a["o"])(N,{class:"header-btn"},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.HOME_HEADER.CHOOSE_LANG))+" ",1),Object(a["o"])(M)]),_:1})]),_:1}),Object(a["o"])(G,null,{overlay:Object(a["eb"])(()=>[Object(a["o"])(y,null,{default:Object(a["eb"])(()=>[Object(a["o"])(C,{key:"1",onClick:t[4]||(t[4]=t=>e.newTabs("https://cubyfun.com/#/"))},{default:Object(a["eb"])(()=>[Object(a["o"])(D),O]),_:1}),Object(a["o"])(C,{key:"1",onClick:t[5]||(t[5]=t=>e.newTabs("https://docs.cubyfun.com/zh/"))},{default:Object(a["eb"])(()=>[Object(a["o"])(k),T]),_:1}),Object(a["o"])(C,{key:"1",onClick:t[6]||(t[6]=t=>e.newTabs("https://docs.cubyfun.com/zh/ContactUs.html"))},{default:Object(a["eb"])(()=>[Object(a["o"])(B),E]),_:1})]),_:1})]),default:Object(a["eb"])(()=>[Object(a["o"])(N,{class:"header-btn"},{default:Object(a["eb"])(()=>[m,Object(a["o"])(M)]),_:1})]),_:1})]),_:1},8,["sub-title"]),Object(a["m"])("div",b,[Object(a["m"])("div",A,[Object(a["o"])(P,{message:e.$t(e.LANG.HOME_HEADER.PROGRAM_WARN),"show-icon":"",type:"warning"},null,8,["message"])]),Object(a["o"])(a["f"],{name:"fade",class:"list-view",tag:"div"},{default:Object(a["eb"])(()=>[(Object(a["J"])(!0),Object(a["l"])(a["b"],null,Object(a["Q"])(e.projectList,n=>(Object(a["J"])(),Object(a["l"])("div",{key:n.uuid,class:Object(a["z"])([e.handleItemClass(n),"item"]),onClick:Object(a["gb"])(t=>e.onProjectClick(n),["stop"])},[Object(a["m"])("div",R,[Object(a["m"])("span",I,Object(a["V"])(n.name),1),Object(a["m"])("div",{class:"bottom-line",onClick:t[7]||(t[7]=Object(a["gb"])(()=>{},["stop"]))},[Object(a["o"])(F,{class:"bottom-icon",title:"重命名",onClick:t=>e.renameGamePop(n.name,n.uuid)},null,8,["onClick"]),Object(a["o"])(j,{class:"bottom-icon download-icon",title:e.$t(e.LANG.GAME_LIST.DOWNLOAD),onClick:t=>e.exportProgram(n.name,n.uuid)},null,8,["title","onClick"]),Object(a["o"])($,{title:e.$t(e.LANG.GAME_LIST.DELETE_CONFIRM),"ok-text":e.$t(e.LANG.COMMON.CONFIRM),"cancel-text":e.$t(e.LANG.COMMON.CANCEL),onConfirm:t=>e.handleDelete(n.uuid)},{default:Object(a["eb"])(()=>[Object(a["m"])("span",v,[Object(a["o"])(V,{title:e.$t(e.LANG.GAME_LIST.DELETE)},null,8,["title"])])]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])])])],10,h))),128))]),_:1})]),Object(a["o"])(w,{visible:e.visibleOfCreateProject,"onUpdate:visible":t[9]||(t[9]=t=>e.visibleOfCreateProject=t),width:360,"ok-text":e.$t(e.LANG.COMMON.CONFIRM),"cancel-text":e.$t(e.LANG.COMMON.CANCEL),title:e.$t(e.LANG.GAME_LIST.CREATE_NEW_GAME),onOk:e.handleOk},{default:Object(a["eb"])(()=>[Object(a["o"])(x,{ref:"refCreatePopBox",value:e.programName,"onUpdate:value":t[8]||(t[8]=t=>e.programName=t),placeholder:e.$t(e.LANG.GAME_LIST.GAME_NAME)},null,8,["value","placeholder"])]),_:1},8,["visible","ok-text","cancel-text","title","onOk"]),Object(a["o"])(w,{visible:e.visibleOfRenameProject,"onUpdate:visible":t[11]||(t[11]=t=>e.visibleOfRenameProject=t),width:360,"ok-text":e.$t(e.LANG.COMMON.CONFIRM),"cancel-text":e.$t(e.LANG.COMMON.CANCEL),title:e.$t(e.LANG.GAME_LIST.RENAME_GAME),onCancel:t[12]||(t[12]=t=>e.programName=""),onOk:e.handleRenameOk},{default:Object(a["eb"])(()=>[Object(a["o"])(x,{ref:"refCreatePopBox",value:e.programName,"onUpdate:value":t[10]||(t[10]=t=>e.programName=t),placeholder:e.$t(e.LANG.GAME_LIST.GAME_NAME)},null,8,["value","placeholder"])]),_:1},8,["visible","ok-text","cancel-text","title","onOk"]),Object(a["o"])(Y,{modelValue:e.visibleOfJOYOUpdate,"onUpdate:modelValue":t[13]||(t[13]=t=>e.visibleOfJOYOUpdate=t)},null,8,["modelValue"]),Object(a["o"])(H,{modelValue:e.visibleOfConnectTip,"onUpdate:modelValue":t[14]||(t[14]=t=>e.visibleOfConnectTip=t)},null,8,["modelValue"])])}var N=n("6605"),S=n("f64c"),f=n("c330");const L=e=>(Object(a["M"])("data-v-25494885"),e=e(),Object(a["K"])(),e),j=Object(a["n"])(" 当前版本号："),$=L(()=>Object(a["m"])("span",{style:{color:"#faad14"}},"设备未连接",-1)),C=[j,$];function y(e,t,n,r,o,i){const s=Object(a["S"])("a-spin"),l=Object(a["S"])("a-modal");return Object(a["J"])(),Object(a["l"])("div",null,[Object(a["o"])(l,{visible:e.versionPopVisible,"onUpdate:visible":t[0]||(t[0]=t=>e.versionPopVisible=t),width:360,"ok-text":"更新版本","cancel-text":"我知道了",title:"设备信息","ok-button-props":{disabled:e.disabledOK},onCancel:e.handleCancel,onOk:e.handleUpdateJOYO},{default:Object(a["eb"])(()=>[Object(a["fb"])(Object(a["m"])("div",null," 当前版本号："+Object(a["V"])(e.currentVersion||"--"),513),[[a["bb"],e.connectStatus]]),Object(a["fb"])(Object(a["m"])("div",null,C,512),[[a["bb"],!e.connectStatus]]),Object(a["m"])("div",null,"最新版本: "+Object(a["V"])(e.lastVersion||"--"),1),Object(a["fb"])(Object(a["m"])("div",null,[Object(a["o"])(s),Object(a["n"])(" "+Object(a["V"])(e.updateStatusMap[e.updateStep])+" ",1),Object(a["fb"])(Object(a["m"])("span",null,"("+Object(a["V"])(e.transferProgress)+"%)",513),[[a["bb"],2===e.updateStep]]),Object(a["fb"])(Object(a["m"])("span",null,"，请勿关闭窗口",512),[[a["bb"],2===e.updateStep]])],512),[[a["bb"],e.updateStep>0]])]),_:1},8,["visible","ok-button-props","onCancel","onOk"])])}var M=n("5502"),G=Object(a["p"])({components:{},props:{modelValue:{type:Boolean,default:!1}},emits:["start-upgrade","re-connect","update:modelValue"],setup(e,{emit:t}){const n=Object(a["O"])(),r=Object(a["N"])({versionPopVisible:!1,disabledOK:!1,step:1,title:["Joyo needs an update","Updating Joyo","Update success!","Update fail!","Reconnection failed, please connect Joyo manually!","Update Timeout!"],updateStatusMap:["升级完成","下载固件","固件下载完成，传输中","升级完成，请等待设备重启后，重新连接JOYO"]}),o=Object(M["b"])(),i=Object(a["h"])(()=>o.getters["ble/connectStatus"]),s=Object(a["h"])(()=>o.state.ble.updateStep);Object(a["cb"])(()=>i.value,e=>{e?o.commit("ble/resetUpgradeStatus"):r.disabledOK=!0}),Object(a["cb"])(()=>s.value,e=>{r.disabledOK=e>0});const l=Object(a["h"])(()=>o.state.ble.lastVersion),c=Object(a["h"])(()=>o.state.ble.currentVersion),u=Object(a["h"])(()=>o.state.ble.transferProgress);Object(a["cb"])(()=>e.modelValue,()=>{e.modelValue&&(r.versionPopVisible=!0,o.dispatch("ble/bleGetOriginVersion"),o.dispatch("ble/bleGetCurrentVersion"))});const _=()=>{n.value.open()};function p(){t("update:modelValue",!1)}function d(){o.dispatch("ble/bleUpgradeDevice")}return Object(a["G"])(()=>{}),{...Object(a["Y"])(r),handleUpdateJOYO:d,handleCancel:p,connectStatus:i,lastVersion:l,currentVersion:c,updateStep:s,transferProgress:u,open:_}}}),D=(n("7f8a"),n("6b0d")),k=n.n(D);const B=k()(G,[["render",y],["__scopeId","data-v-25494885"]]);var U=B;const P={class:"cc"},F={"data-outlined":"false",class:""},V=Object(a["m"])("ul",null,[Object(a["m"])("li",null,[Object(a["m"])("a",{href:"https://support.microsoft.com/zh-cn/help/15290/windows-connect-bluetooth-device",target:"_blank",rel:"noopener"},"Windows")]),Object(a["m"])("li",null,[Object(a["m"])("a",{href:"https://support.apple.com",rel:"noopener",target:"_blank"},"Mac")]),Object(a["m"])("li",null,[Object(a["m"])("a",{href:"https://help.ubuntu.com/stable/ubuntu-help/bluetooth-turn-on-off.html",target:"_blank",rel:"noopener"},"Linux")]),Object(a["m"])("li",null,[Object(a["m"])("a",{href:"/chromebook/answer/2587653"},"Chromebook")])],-1),x={href:"https://support.microsoft.com/zh-cn/hub/4338813/windows-help",rel:"noopener"},w=Object(a["n"])("。 ");function Y(e,t,n,r,o,i){const s=Object(a["S"])("a-modal");return Object(a["J"])(),Object(a["l"])("div",null,[Object(a["o"])(s,{visible:e.popVisible,"onUpdate:visible":t[0]||(t[0]=t=>e.popVisible=t),class:"connect-tip",width:1e3,"cancel-text":e.$t(e.LANG.COMMON.OK_TEXT),title:e.$t(e.LANG.HOME_CONNECT_TIP.TITLE),onCancel:e.handleCancel},{default:Object(a["eb"])(()=>[Object(a["m"])("div",null,[Object(a["m"])("div",P,[Object(a["m"])("h2",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P1_TITLE)),1),Object(a["m"])("ol",null,[Object(a["m"])("li",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P1_1)),1),Object(a["m"])("li",F,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P1_2)),1),Object(a["m"])("li",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P1_3)),1),Object(a["m"])("li",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P1_4)),1),Object(a["m"])("li",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P1_5)),1)]),Object(a["m"])("h3",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P2_TITLE)),1),Object(a["m"])("p",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P2_1)),1),Object(a["m"])("p",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P2_2)),1),V,Object(a["m"])("p",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P2_3)),1),Object(a["m"])("p",null,[Object(a["m"])("strong",null,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P2_4)),1),Object(a["n"])(Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P2_5)),1),Object(a["m"])("a",x,Object(a["V"])(e.$t(e.LANG.HOME_CONNECT_TIP.P2_6)),1),w])])])]),_:1},8,["visible","cancel-text","title","onCancel"])])}var H=n("4ad9"),K=Object(a["p"])({components:{},props:{modelValue:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=Object(a["N"])({popVisible:!1});function r(){t("update:modelValue",!1)}Object(a["cb"])(()=>e.modelValue,()=>{e.modelValue&&(n.popVisible=!0)});Object(M["b"])();return{handleCancel:r,LANG:H["a"],...Object(a["Y"])(n)}}});n("2887");const X=k()(K,[["render",Y]]);var W=X,J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M632 698.3l141.9-112a8 8 0 000-12.6L632 461.7c-5.3-4.2-13-.4-13 6.3v76H295c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h324v76c0 6.7 7.8 10.4 13 6.3zm261.3-405L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v278c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V422c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-83.5c0-17-6.7-33.2-18.7-45.2zM640 288H384V184h256v104zm264 436h-56c-4.4 0-8 3.6-8 8v108H184V732c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v148c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V732c0-4.4-3.6-8-8-8z"}}]},name:"delivered-procedure",theme:"outlined"},Q=J,q=n("b3f0");function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Z(e,t,n[t])}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e,t){var n=z({},e,t.attrs);return Object(a["o"])(q["a"],z({},n,{icon:Q}),null)};ee.displayName="DeliveredProcedureOutlined",ee.inheritAttrs=!1;var te=ee,ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}}]},name:"vertical-align-bottom",theme:"outlined"},ae=ne;function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){oe(e,t,n[t])}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e,t){var n=re({},e,t.attrs);return Object(a["o"])(q["a"],re({},n,{icon:ae}),null)};ie.displayName="VerticalAlignBottomOutlined",ie.inheritAttrs=!1;var se=ie,le=n("47ce"),ce=n("b1c8"),ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},_e=ue;function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){de(e,t,n[t])}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=function(e,t){var n=pe({},e,t.attrs);return Object(a["o"])(q["a"],pe({},n,{icon:_e}),null)};Oe.displayName="QuestionCircleOutlined",Oe.inheritAttrs=!1;var Te=Oe,Ee=n("35c8"),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2zM389.8 796.2H229.6l134.4-133 80.1 78.9-54.3 54.1zm154.8-62.1L373.2 565.2l68.6-67.6 171.4 168.9-68.6 67.6zM713.1 658L450.3 399.1 597.6 254l262.8 259-147.3 145z"}}]},name:"highlight",theme:"outlined"},be=me;function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){he(e,t,n[t])}))}return e}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=function(e,t){var n=Ae({},e,t.attrs);return Object(a["o"])(q["a"],Ae({},n,{icon:be}),null)};Re.displayName="HighlightOutlined",Re.inheritAttrs=!1;var Ie=Re,ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},ge=ve;function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Se(e,t,n[t])}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=function(e,t){var n=Ne({},e,t.attrs);return Object(a["o"])(q["a"],Ne({},n,{icon:ge}),null)};fe.displayName="HomeOutlined",fe.inheritAttrs=!1;var Le=fe,je={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"},$e=je;function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){ye(e,t,n[t])}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me=function(e,t){var n=Ce({},e,t.attrs);return Object(a["o"])(q["a"],Ce({},n,{icon:$e}),null)};Me.displayName="MessageOutlined",Me.inheritAttrs=!1;var Ge=Me,De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm144 452H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm445.7 51.5l-93.3-93.3C814.7 780.7 828 743.9 828 704c0-97.2-78.8-176-176-176s-176 78.8-176 176 78.8 176 176 176c35.8 0 69-10.7 96.8-29l94.7 94.7c1.6 1.6 3.6 2.3 5.6 2.3s4.1-.8 5.6-2.3l31-31a7.9 7.9 0 000-11.2zM652 816c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"file-search",theme:"outlined"},ke=De;function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){Ue(e,t,n[t])}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=function(e,t){var n=Be({},e,t.attrs);return Object(a["o"])(q["a"],Be({},n,{icon:ke}),null)};Pe.displayName="FileSearchOutlined",Pe.inheritAttrs=!1;var Fe=Pe;function Ve(e,t){const n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var xe=n("0cdc"),we=Object(a["p"])({name:"Home",components:{DeliveredProcedureOutlined:te,VerticalAlignBottomOutlined:se,PlusOutlined:le["a"],DeleteOutlined:ce["a"],HeaderNav:f["a"],UpdateProcess:U,ConnectTip:W,QuestionCircleOutlined:Te,DownOutlined:Ee["a"],HighlightOutlined:Ie,HomeOutlined:Le,MessageOutlined:Ge,FileSearchOutlined:Fe},setup(){Object(N["d"])();const e=Object(N["e"])(),t=Object(M["b"])(),n=Object(a["O"])(),r=Object(a["O"])([]),o=Object(a["N"])({programName:"",programId:"",visibleOfJOYOUpdate:!1,visibleOfConnectTip:!1,visibleOfCreateProject:!1,visibleOfRenameProject:!1,visibleOfExportProject:!1}),i=Object(a["h"])(()=>t.getters.projectListByFilter),s=Object(a["h"])(()=>t.getters["ble/connectStatus"]);Object(a["cb"])(()=>s.value,e=>{e&&t.dispatch("ble/bleGetCurrentVersion")});const l=async()=>{t.dispatch("getProject")},c=()=>{o.visibleOfCreateProject=!0,Object(a["y"])(()=>{n.value.focus()})},u=(e,t)=>{o.visibleOfRenameProject=!0,o.programId=t,o.programName=e,Object(a["y"])(()=>{n.value.focus()})},_=e=>{t.dispatch("createProject",{name:e})},p=()=>{if(o.programName){const e=i.value;for(let t=e.length;t--;)if(e[t].name===o.programName)return void S["a"].warning("程序名已存在");_(o.programName),o.programName="",o.visibleOfCreateProject=!1}else S["a"].warning("程序名不能为空")},d=()=>{if(o.programName){const e=i.value;for(let t=e.length;t--;)if(e[t].name===o.programName)return void S["a"].warning("程序名已存在");t.dispatch("renameProject",{name:o.programName,id:o.programId}),o.programName="",o.programId="",o.visibleOfRenameProject=!1}else S["a"].warning("程序名不能为空")},O=t=>{e.push("/blockly?uuid="+t.uuid)};function T(){const e=document.getElementById("listFileInput");e&&e.addEventListener("change",(function(){var e;if(0===(null===this||void 0===this||null===(e=this.files)||void 0===e?void 0:e.length))return;const n=null===this||void 0===this?void 0:this.files,a=new FileReader;a.onload=function(){var e,r;const o=null===n||void 0===n||null===(e=n[0])||void 0===e||null===(r=e.name)||void 0===r?void 0:r.split(".")[0];try{t.dispatch("createProject",{name:o,content:a.result})}catch(i){console.log(i)}},n&&a.readAsText(n[0])}))}function E(){try{const e=window.JSZip,t=new e;i.value.forEach(e=>{const n=localStorage.getItem("block-"+e.uuid);t.file(e.name+".jo",n)}),t.generateAsync({type:"blob"}).then(e=>{var t="programs.zip",n=document.createElement("a");n.download=t,n.style.display="none",n.href=URL.createObjectURL(e),document.body.appendChild(n),n.click(),document.body.removeChild(n)})}catch{S["a"].error("导出出错")}}function m(e,t){const n=localStorage.getItem("block-"+t);n?Ve(e+".jo",n):S["a"].warn("导出失败")}function b(e){const t=[];return t.push("item-color"+(e.createAt||0)%5),t}function A(e){t.dispatch("deleteProject",e)}function h(){s.value?t.dispatch("ble/bleDisconnect"):t.dispatch("ble/bleConnect")}const R=Object(a["h"])(()=>!(!t.state.ble.lastVersion||!t.state.ble.currentVersion)&&t.state.ble.lastVersion!==t.state.ble.currentVersion),I=e=>{window.open(e)};return Object(a["C"])(async()=>{}),Object(a["H"])(()=>{}),Object(a["G"])(async()=>{await t.dispatch("createPresetGame"),l(),T(),t.dispatch("ble/bleGetOriginVersion")}),{router:e,refCreatePopBox:n,...Object(a["Y"])(o),projectList:i,fileList:r,connectStatus:s,hasNewVersion:R,createProjectPop:c,renameGamePop:u,createProject:_,handleOk:p,handleRenameOk:d,handleDelete:A,onProjectClick:O,exportAllProgram:E,exportProgram:m,handleItemClass:b,connectJoyo:h,LocaleEnum:xe["a"],LANG:H["a"],setLocale:xe["b"].setLocale,newTabs:I}}});n("ce20"),n("e6e1");const Ye=k()(we,[["render",g],["__scopeId","data-v-16d6f575"]]);t["default"]=Ye},1945:function(e,t,n){"use strict";n("229f")},"1daa":function(e,t,n){"use strict";n("5951")},"1f09":function(e,t,n){},"21da":function(e,t,n){},"229f":function(e,t,n){},2887:function(e,t,n){"use strict";n("1f09")},"2ddc":function(e,t,n){var a,r,o;(function(i,s){r=[n("b7fd"),n("a884"),n("49d2"),n("fc06")],a=s,o="function"===typeof a?a.apply(t,r):a,void 0===o||(e.exports=o)})(0,(function(e,t,n,a){
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
"use strict";return e.setLocale(t),e}))},"2e32":function(e,t,n){},"414d":function(e,t,n){},"49d2":function(e,t,n){var a,r,o;(function(i,s){r=[n("75da")],a=s,o="function"===typeof a?a.apply(t,r):a,void 0===o||(e.exports=o)})(0,(function(e){
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
return e}))},"4ad9":function(e,t,n){"use strict";var a=n("55b6");const r={},o=a["a"];for(const i in o)if("string"!==typeof o[i]){r[i]={};for(const e in o[i])r[i][e]=`${i}.${e}`}else r[i]=i;t["a"]=r},"4d79":function(e,t,n){"use strict";n("8d58")},"4f77":function(e,t,n){"use strict";n.r(t);var a=n("7a23");const r=e=>(Object(a["M"])("data-v-398f4f3a"),e=e(),Object(a["K"])(),e),o={class:"phone"},i=Object(a["n"])(" 请在PC端网页打开，推荐使用chrome浏览器"),s=r(()=>Object(a["m"])("br",null,null,-1)),l=Object(a["n"])(" Please open it on the PC web page, "),c=r(()=>Object(a["m"])("br",null,null,-1)),u=Object(a["n"])(" it is recommended to use the chrome browser "),_=[i,s,l,c,u];function p(e,t,n,r,i,s){return Object(a["J"])(),Object(a["l"])("div",o,_)}var d=n("6605"),O=Object(a["p"])({name:"NoPermit",components:{},setup(){Object(d["e"])();return{}}}),T=(n("b86c"),n("6b0d")),E=n.n(T);const m=E()(O,[["render",p],["__scopeId","data-v-398f4f3a"]]);t["default"]=m},5324:function(e,t,n){"use strict";n("414d")},"54ca":function(e,t,n){var a,r,o;(function(i,s){r=[n("2ddc")],a=s,o="function"===typeof a?a.apply(t,r):a,void 0===o||(e.exports=o)})(0,(function(e){
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
return e}))},5951:function(e,t,n){},"6d92":function(e,t,n){(function(t,n){e.exports=n(),e.exports.default=e.exports})(0,(function(){var e=function(){this.listeners={},this.registerListener=function(t,n,a){var r=t.constructor.name;a=this.validateNumber(a||"any"),"Array"!==r&&(t=[t]),t.forEach((function(t){if("String"!==t.constructor.name)throw new Error("Only `String` and array of `String` are accepted for the event names!");e.listeners[t]=e.listeners[t]||[],e.listeners[t].push({callback:n,number:a})}))},this.validateNumber=function(e){var t=e.constructor.name;if("Number"===t)return e;if("String"===t&&"any"===e.toLowerCase())return"any";throw new Error("Only `Number` and `any` are accepted in the number of possible executions!")},this.toBeRemoved=function(e){var t=e.number;return e.execution=e.execution||0,e.execution++,!("any"===t||e.execution<t)};var e=this;return{on:function(t,n){e.registerListener.bind(e)(t,n,"any")},once:function(t,n){e.registerListener.bind(e)(t,n,1)},exactly:function(t,n,a){e.registerListener.bind(e)(n,a,t)},die:function(t){delete e.listeners[t]},off:function(e){this.die(e)},detach:function(t,n){if(void 0===n)return e.listeners[t]=[],!0;for(var a in e.listeners[t])if(e.listeners[t].hasOwnProperty(a)&&e.listeners[t][a].callback===n)return e.listeners[t].splice(a,1),this.detach(t,n);return!0},detachAll:function(){for(var t in e.listeners)e.listeners.hasOwnProperty(t)&&this.detach(t)},emit:function(t,n){var a=[];for(var r in e.listeners)if(e.listeners.hasOwnProperty(r)&&(r===t&&Array.prototype.push.apply(a,e.listeners[r]),r.indexOf("*")>=0)){var o=r.replace(/\*\*/,"([^.]+.?)+");o=o.replace(/\*/g,"[^.]+");var i=t.match(o);i&&t===i[0]&&Array.prototype.push.apply(a,e.listeners[r])}var s=arguments;n=n||this,a.forEach((function(a,r){var o=a.callback;a.number;n&&(o=o.bind(n));var i=[];Object.keys(s).map((function(e){e>1&&i.push(s[e])})),e.toBeRemoved(a)&&e.listeners[t].splice(r,1),o.apply(null,i)}))}}};return e}))},"75da":function(e,t,n){var a,r,o;(function(i,s){r=[n("e98f")],a=s,o="function"===typeof a?a.apply(t,r):a,void 0===o||(e.exports=o)})(0,(function(e){var t=e.__namespace__,n={},a=(t.module$build$src$core$contextmenu,t.module$build$src$core$extensions,t.module$build$src$core$variables,t.module$build$src$core$utils$xml,t.module$build$src$core$msg.Msg),r=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,o=t.module$build$src$core$common.defineBlocks;n.blocks=r([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var i={customContextMenu:function(e){if(this.isInFlyout)"variables_get_dynamic"!==this.type&&"variables_get_reporter_dynamic"!==this.type||(n={text:a.RENAME_VARIABLE,enabled:!0,callback:s(this)},i=this.getField("VAR").getText(),i={text:a.DELETE_VARIABLE.replace("%1",i),enabled:!0,callback:l(this)},e.unshift(n),e.unshift(i));else{var n=this.getFieldValue("VAR"),r=this.workspace.getVariableById(n).type;if("variables_get_dynamic"===this.type){n="variables_set_dynamic";var o=a.VARIABLES_GET_CREATE_SET}else n="variables_get_dynamic",o=a.VARIABLES_SET_CREATE_GET;var i={enabled:0<this.workspace.remainingCapacity()};const s=this.getField("VAR").getText();i.text=o.replace("%1",s),o=t.module$build$src$core$utils$xml.createElement("field"),o.setAttribute("name","VAR"),o.setAttribute("variabletype",r),o.appendChild(t.module$build$src$core$utils$xml.createTextNode(s)),r=t.module$build$src$core$utils$xml.createElement("block"),r.setAttribute("type",n),r.appendChild(o),i.callback=t.module$build$src$core$contextmenu.callbackFactory(this,r),e.push(i)}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.module$build$src$core$variables.getVariable(this.workspace,e),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}},s=function(e){return function(){const n=e.workspace,a=e.getField("VAR").getVariable();t.module$build$src$core$variables.renameVariable(n,a)}},l=function(e){return function(){const t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}};t.module$build$src$core$extensions.registerMixin("contextMenu_variableDynamicSetterGetter",i),o(n.blocks);var c={},u=(t.module$build$src$core$contextmenu,t.module$build$src$core$extensions,t.module$build$src$core$variables,t.module$build$src$core$utils$xml,t.module$build$src$core$msg.Msg),_=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,p=t.module$build$src$core$common.defineBlocks;c.blocks=_([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var d={customContextMenu:function(e){if(this.isInFlyout)"variables_get"!==this.type&&"variables_get_reporter"!==this.type||(n={text:u.RENAME_VARIABLE,enabled:!0,callback:O(this)},r=this.getField("VAR").getText(),r={text:u.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:T(this)},e.unshift(n),e.unshift(r));else{if("variables_get"===this.type)var n="variables_set",a=u.VARIABLES_GET_CREATE_SET;else n="variables_get",a=u.VARIABLES_SET_CREATE_GET;var r={enabled:0<this.workspace.remainingCapacity()},o=this.getField("VAR").getText();r.text=a.replace("%1",o),a=t.module$build$src$core$utils$xml.createElement("field"),a.setAttribute("name","VAR"),a.appendChild(t.module$build$src$core$utils$xml.createTextNode(o)),o=t.module$build$src$core$utils$xml.createElement("block"),o.setAttribute("type",n),o.appendChild(a),r.callback=t.module$build$src$core$contextmenu.callbackFactory(this,o),e.push(r)}}},O=function(e){return function(){const n=e.workspace,a=e.getField("VAR").getVariable();t.module$build$src$core$variables.renameVariable(n,a)}},T=function(e){return function(){const t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}};t.module$build$src$core$extensions.registerMixin("contextMenu_variableSetterGetter",d),p(c.blocks);var E={},m=(t.module$build$src$core$extensions,t.module$build$src$core$msg.Msg),b=(t.module$build$src$core$utils$xml,t.Align$$module$build$src$core$input,t.module$build$src$core$connection_type.ConnectionType,t.module$build$src$core$field_dropdown.FieldDropdown),A=(t.FieldImage$$module$build$src$core$field_image,t.FieldTextInput$$module$build$src$core$field_textinput,t.Mutator$$module$build$src$core$mutator,t.module$build$src$core$common.createBlockDefinitionsFromJsonArray),h=t.module$build$src$core$common.defineBlocks;E.blocks=A([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),E.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[m.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[m.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[m.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[m.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[m.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[m.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(m.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(m.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),m.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(m.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(m.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");var n=this.getInput("AT1").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(e){const t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(e,t){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),t?(this.appendValueInput("AT"+e).setCheck("Number"),m.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(m.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2===e&&m.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(m.TEXT_GET_SUBSTRING_TAIL));const n=new b(this["WHERE_OPTIONS_"+e],(function(n){const a="FROM_START"===n||"FROM_END"===n;if(a!==t){const t=this.getSourceBlock();return t.updateAt_(e,a),t.setFieldValue(n,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(n,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},E.blocks.text_changeCase={init:function(){const e=[[m.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[m.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[m.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(m.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new b(e),"CASE"),this.setOutput(!0,"String"),this.setTooltip(m.TEXT_CHANGECASE_TOOLTIP)}},E.blocks.text_trim={init:function(){const e=[[m.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[m.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[m.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(m.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new b(e),"MODE"),this.setOutput(!0,"String"),this.setTooltip(m.TEXT_TRIM_TOOLTIP)}},E.blocks.text_print={init:function(){this.jsonInit({message0:m.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:m.TEXT_PRINT_TOOLTIP,helpUrl:m.TEXT_PRINT_HELPURL})}};var R={updateType_:function(e){this.outputConnection.setCheck("NUMBER"===e?"Number":"String")},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}};E.blocks.text_prompt_ext=Object.assign({},R,{init:function(){var e=[[m.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[m.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(m.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");const t=this;e=new b(e,(function(e){t.updateType_(e)})),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"===t.getFieldValue("TYPE")?m.TEXT_PROMPT_TOOLTIP_TEXT:m.TEXT_PROMPT_TOOLTIP_NUMBER}))}}),E.blocks.text_prompt=Object.assign({},R,{init:function(){this.mixin(I);var e=[[m.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[m.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];const n=this;this.setHelpUrl(m.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),e=new b(e,(function(e){n.updateType_(e)})),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput$$module$build$src$core$field_textinput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((function(){return"TEXT"===n.getFieldValue("TYPE")?m.TEXT_PROMPT_TOOLTIP_TEXT:m.TEXT_PROMPT_TOOLTIP_NUMBER}))}}),E.blocks.text_count={init:function(){this.jsonInit({message0:m.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:m.TEXT_COUNT_TOOLTIP,helpUrl:m.TEXT_COUNT_HELPURL})}},E.blocks.text_replace={init:function(){this.jsonInit({message0:m.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:m.TEXT_REPLACE_TOOLTIP,helpUrl:m.TEXT_REPLACE_HELPURL})}},E.blocks.text_reverse={init:function(){this.jsonInit({message0:m.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:m.TEXT_REVERSE_TOOLTIP,helpUrl:m.TEXT_REVERSE_HELPURL})}};var I={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(let t,n=0;t=this.inputList[n];n++)for(let a,r=0;a=t.fieldRow[r];r++)if(e===a.name)return t.insertFieldAt(r,this.newQuote_(!0)),void t.insertFieldAt(r+2,this.newQuote_(!1));console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,new t.FieldImage$$module$build$src$core$field_image(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"“":"”")}},v=function(){this.mixin(I),this.quoteField_("TEXT")},g={mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("text_create_join_container");t.initSvg();let n=t.getInput("STACK").connection;for(let a=0;a<this.itemCount_;a++){const t=e.newBlock("text_create_join_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n;)n.isInsertionMarker()||e.push(n.valueConnection_),n=n.getNextBlock();for(n=0;n<this.itemCount_;n++){const t=this.getInput("ADD"+n).connection.targetConnection;t&&-1===e.indexOf(t)&&t.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator$$module$build$src$core$mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}const n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const n=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$input.RIGHT);0===e&&n.appendField(m.TEXT_JOIN_TITLE_CREATEWITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},N=function(){this.mixin(I),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["text_create_join_item"],this))};t.module$build$src$core$extensions.register("text_append_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var S=function(){const e=this;this.setTooltip((function(){return m.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")}))},f={mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("at",!!this.isAt_),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),m.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(m.ORDINAL_NUMBER_SUFFIX)),m.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(m.TEXT_CHARAT_TAIL)),this.isAt_=e}},L=function(){this.getField("WHERE").setValidator((function(e){e="FROM_START"===e||"FROM_END"===e,e!==this.isAt_&&this.getSourceBlock().updateAt_(e)})),this.updateAt_(!0);const e=this;this.setTooltip((function(){var t=e.getFieldValue("WHERE");let n=m.TEXT_CHARAT_TOOLTIP;return("FROM_START"===t||"FROM_END"===t)&&(t="FROM_START"===t?m.LISTS_INDEX_FROM_START_TOOLTIP:m.LISTS_INDEX_FROM_END_TOOLTIP)&&(n+="  "+t.replace("%1",e.workspace.options.oneBasedIndex?"#1":"#0")),n}))};t.module$build$src$core$extensions.register("text_indexOf_tooltip",S),t.module$build$src$core$extensions.register("text_quotes",v),t.module$build$src$core$extensions.registerMutator("text_join_mutator",g,N),t.module$build$src$core$extensions.registerMutator("text_charAt_mutator",f,L),h(E.blocks);var j={},$=(t.module$build$src$core$contextmenu,t.module$build$src$core$events$events,t.module$build$src$core$procedures,t.module$build$src$core$variables,t.module$build$src$core$xml,t.module$build$src$core$utils$xml,t.Align$$module$build$src$core$input,t.config$$module$build$src$core$config,t.FieldCheckbox$$module$build$src$core$field_checkbox,t.FieldLabel$$module$build$src$core$field_label,t.FieldTextInput$$module$build$src$core$field_textinput,t.module$build$src$core$msg.Msg),C=(t.Mutator$$module$build$src$core$mutator,t.module$build$src$core$names.Names,t.module$build$src$core$common.defineBlocks);j.blocks={};var y={setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField($.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){let e="";this.arguments_.length&&(e=$.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.module$build$src$core$events$events.disable();try{this.setFieldValue(e,"PARAMS")}finally{t.module$build$src$core$events$events.enable()}},mutationToDom:function(e){const n=t.module$build$src$core$utils$xml.createElement("mutation");e&&n.setAttribute("name",this.getFieldValue("NAME"));for(let a=0;a<this.argumentVarModels_.length;a++){const r=t.module$build$src$core$utils$xml.createElement("arg"),o=this.argumentVarModels_[a];r.setAttribute("name",o.name),r.setAttribute("varid",o.getId()),e&&this.paramIds_&&r.setAttribute("paramId",this.paramIds_[a]),n.appendChild(r)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(let a,r=0;a=e.childNodes[r];r++)if("arg"===a.nodeName.toLowerCase()){const e=a.getAttribute("name");var n=a.getAttribute("varid")||a.getAttribute("varId");this.arguments_.push(e),n=t.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,n,e,""),null!==n?this.argumentVarModels_.push(n):console.log(`Failed to create a variable named "${e}", ignoring.`)}this.updateParams_(),t.module$build$src$core$procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const e=Object.create(null);if(this.argumentVarModels_.length){e.params=[];for(let t=0;t<this.argumentVarModels_.length;t++)e.params.push({name:this.argumentVarModels_[t].name,id:this.argumentVarModels_[t].getId()})}return this.hasStatements_||(e.hasStatements=!1),e},loadExtraState:function(e){if(this.arguments_=[],this.argumentVarModels_=[],e.params)for(let a=0;a<e.params.length;a++){var n=e.params[a];n=t.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,n.id,n.name,""),this.arguments_.push(n.name),this.argumentVarModels_.push(n)}this.updateParams_(),t.module$build$src$core$procedures.mutateCallers(this),this.setStatements_(!1!==e.hasStatements)},decompose:function(e){const n=t.module$build$src$core$utils$xml.createElement("block");n.setAttribute("type","procedures_mutatorcontainer");var a=t.module$build$src$core$utils$xml.createElement("statement");a.setAttribute("name","STACK"),n.appendChild(a);for(let o=0;o<this.arguments_.length;o++){const e=t.module$build$src$core$utils$xml.createElement("block");e.setAttribute("type","procedures_mutatorarg");var r=t.module$build$src$core$utils$xml.createElement("field");r.setAttribute("name","NAME");const n=t.module$build$src$core$utils$xml.createTextNode(this.arguments_[o]);r.appendChild(n),e.appendChild(r),r=t.module$build$src$core$utils$xml.createElement("next"),e.appendChild(r),a.appendChild(e),a=r}return e=t.module$build$src$core$xml.domToBlock(n,e),"procedures_defreturn"===this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.module$build$src$core$procedures.mutateCallers(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let n=e.getInputTargetBlock("STACK");for(;n&&!n.isInsertionMarker();){var a=n.getFieldValue("NAME");this.arguments_.push(a),a=this.workspace.getVariable(a,""),this.argumentVarModels_.push(a),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateParams_(),t.module$build$src$core$procedures.mutateCallers(this),e=e.getFieldValue("STATEMENTS"),null!==e&&(e="TRUE"===e,this.hasStatements_!==e)&&(e?(this.setStatements_(!0),t.Mutator$$module$build$src$core$mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(e=this.getInput("STACK").connection,(this.statementConnection_=e.targetConnection)&&(e=e.targetBlock(),e.unplug(),e.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,n){var a=this.workspace.getVariableById(e);if(""===a.type){a=a.name,n=this.workspace.getVariableById(n);var r=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e&&(this.arguments_[t]=n.name,this.argumentVarModels_[t]=n,r=!0);r&&(this.displayRenamedVar_(a,n.name),t.module$build$src$core$procedures.mutateCallers(this))}},updateVarName:function(e){const n=e.name;let a,r=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e.getId()&&(a=this.arguments_[t],this.arguments_[t]=n,r=!0);r&&(this.displayRenamedVar_(a,n),t.module$build$src$core$procedures.mutateCallers(this))},displayRenamedVar_:function(e,n){if(this.updateParams_(),this.mutator&&this.mutator.isVisible()){const a=this.mutator.workspace_.getAllBlocks(!1);for(let r,o=0;r=a[o];o++)"procedures_mutatorarg"===r.type&&t.module$build$src$core$names.Names.equals(e,r.getFieldValue("NAME"))&&r.setFieldValue(n,"NAME")}},customContextMenu:function(e){if(!this.isInFlyout){var n={enabled:!0},a=this.getFieldValue("NAME");n.text=$.PROCEDURES_CREATE_DO.replace("%1",a);var r=t.module$build$src$core$utils$xml.createElement("mutation");for(r.setAttribute("name",a),a=0;a<this.arguments_.length;a++){var o=t.module$build$src$core$utils$xml.createElement("arg");o.setAttribute("name",this.arguments_[a]),r.appendChild(o)}if(a=t.module$build$src$core$utils$xml.createElement("block"),a.setAttribute("type",this.callType_),a.appendChild(r),n.callback=t.module$build$src$core$contextmenu.callbackFactory(this,a),e.push(n),!this.isCollapsed())for(n=0;n<this.argumentVarModels_.length;n++)r={enabled:!0},a=this.argumentVarModels_[n],r.text=$.VARIABLES_SET_CREATE_GET.replace("%1",a.name),a=t.module$build$src$core$variables.generateVariableFieldDom(a),o=t.module$build$src$core$utils$xml.createElement("block"),o.setAttribute("type","variables_get"),o.appendChild(a),r.callback=t.module$build$src$core$contextmenu.callbackFactory(this,o),e.push(r)}}};j.blocks.procedures_defnoreturn=Object.assign({},y,{init:function(){var e=t.module$build$src$core$procedures.findLegalName("",this);e=new t.FieldTextInput$$module$build$src$core$field_textinput(e,t.module$build$src$core$procedures.rename),e.setSpellcheck(!1),this.appendDummyInput().appendField($.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&$.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText($.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip($.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl($.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),j.blocks.procedures_defreturn=Object.assign({},y,{init:function(){var e=t.module$build$src$core$procedures.findLegalName("",this);e=new t.FieldTextInput$$module$build$src$core$field_textinput(e,t.module$build$src$core$procedures.rename),e.setSpellcheck(!1),this.appendDummyInput().appendField($.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.Align$$module$build$src$core$input.RIGHT).appendField($.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&$.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText($.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip($.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl($.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),j.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField($.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField($.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox$$module$build$src$core$field_checkbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip($.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},j.blocks.procedures_mutatorarg={init:function(){const e=new t.FieldTextInput$$module$build$src$core$field_textinput(t.module$build$src$core$procedures.DEFAULT_ARG,this.validator_);e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField($.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip($.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var n=this.getSourceBlock();const a=t.Mutator$$module$build$src$core$mutator.findParentWs(n.workspace);if(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!e)return null;const r=(n.workspace.targetWorkspace||n.workspace).getAllBlocks(!1),o=e.toLowerCase();for(let t=0;t<r.length;t++){if(r[t].id===this.getSourceBlock().id)continue;const e=r[t].getFieldValue("NAME");if(e&&e.toLowerCase()===o)return null}return n.isInFlyout||((n=a.getVariable(e,""))&&n.name!==e&&a.renameVariableById(n.getId(),e),n||(n=a.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(n)),e},deleteIntermediateVars_:function(e){const n=t.Mutator$$module$build$src$core$mutator.findParentWs(this.getSourceBlock().workspace);if(n)for(let t=0;t<this.createdVariables_.length;t++){const a=this.createdVariables_[t];a.name!==e&&n.deleteVariableById(a.getId())}}};var M={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,n){t.module$build$src$core$names.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?$.PROCEDURES_CALLRETURN_TOOLTIP:$.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(e,n){var a=t.module$build$src$core$procedures.getDefinition(this.getProcedureCall(),this.workspace),r=a&&a.mutator&&a.mutator.isVisible();if(r?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),e.join("\n")===this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!==e.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),a=this.rendered,this.rendered=!1;for(let e=0;e<this.arguments_.length;e++){var o=this.getInput("ARG"+e);o&&(o=o.connection.targetConnection,this.quarkConnections_[this.quarkIds_[e]]=o,r&&o&&-1===n.indexOf(this.quarkIds_[e])&&(o.disconnect(),o.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],e=0;e<this.arguments_.length;e++)r=t.module$build$src$core$variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[e],""),this.argumentVarModels_.push(r);if(this.updateShape_(),this.quarkIds_=n)for(n=0;n<this.arguments_.length;n++)e=this.quarkIds_[n],e in this.quarkConnections_&&(t.Mutator$$module$build$src$core$mutator.reconnect(this.quarkConnections_[e],this,"ARG"+n)||delete this.quarkConnections_[e]);(this.rendered=a)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var n=this.getField("ARGNAME"+e);if(n){t.module$build$src$core$events$events.disable();try{n.setValue(this.arguments_[e])}finally{t.module$build$src$core$events$events.enable()}}else n=new t.FieldLabel$$module$build$src$core$field_label(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(t.Align$$module$build$src$core$input.RIGHT).appendField(n,"ARGNAME"+e).init()}for(e=this.arguments_.length;this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField($.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(let n=0;n<this.arguments_.length;n++){const a=t.module$build$src$core$utils$xml.createElement("arg");a.setAttribute("name",this.arguments_[n]),e.appendChild(a)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];const n=[];for(let a,r=0;a=e.childNodes[r];r++)"arg"===a.nodeName.toLowerCase()&&(t.push(a.getAttribute("name")),n.push(a.getAttribute("paramId")));this.setProcedureParameters_(t,n)},saveExtraState:function(){const e=Object.create(null);return e.name=this.getProcedureCall(),this.arguments_.length&&(e.params=this.arguments_),e},loadExtraState:function(e){if(this.renameProcedure(this.getProcedureCall(),e.name),e=e.params){const t=[];t.length=e.length,t.fill(null),this.setProcedureParameters_(e,t)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type===t.module$build$src$core$events$events.BLOCK_CREATE&&-1!==e.ids.indexOf(this.id)){var n=this.getProcedureCall();if(n=t.module$build$src$core$procedures.getDefinition(n,this.workspace),!n||n.type===this.defType_&&JSON.stringify(n.getVars())===JSON.stringify(this.arguments_)||(n=null),!n){t.module$build$src$core$events$events.setGroup(e.group),e=t.module$build$src$core$utils$xml.createElement("xml"),n=t.module$build$src$core$utils$xml.createElement("block"),n.setAttribute("type",this.defType_);var a=this.getRelativeToSurfaceXY(),r=a.y+2*t.config$$module$build$src$core$config.snapRadius;n.setAttribute("x",a.x+t.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)),n.setAttribute("y",r),a=this.mutationToDom(),n.appendChild(a),a=t.module$build$src$core$utils$xml.createElement("field"),a.setAttribute("name","NAME"),r=this.getProcedureCall();const o=t.module$build$src$core$procedures.findLegalName(r,this);r!==o&&this.renameProcedure(r,o),a.appendChild(t.module$build$src$core$utils$xml.createTextNode(r)),n.appendChild(a),e.appendChild(n),t.module$build$src$core$xml.domToWorkspace(e,this.workspace),t.module$build$src$core$events$events.setGroup(!1)}}else e.type===t.module$build$src$core$events$events.BLOCK_DELETE?(n=this.getProcedureCall(),t.module$build$src$core$procedures.getDefinition(n,this.workspace)||(t.module$build$src$core$events$events.setGroup(e.group),this.dispose(!0),t.module$build$src$core$events$events.setGroup(!1))):e.type===t.module$build$src$core$events$events.CHANGE&&"disabled"===e.element&&(n=this.getProcedureCall(),(n=t.module$build$src$core$procedures.getDefinition(n,this.workspace))&&n.id===e.blockId&&((n=t.module$build$src$core$events$events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.module$build$src$core$events$events.setGroup(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.module$build$src$core$events$events.setGroup(n)))},customContextMenu:function(e){if(this.workspace.isMovable()){var n={enabled:!0};n.text=$.PROCEDURES_HIGHLIGHT_DEF;var a=this.getProcedureCall(),r=this.workspace;n.callback=function(){const e=t.module$build$src$core$procedures.getDefinition(a,r);e&&(r.centerOnBlock(e.id),e.select())},e.push(n)}}};j.blocks.procedures_callnoreturn=Object.assign({},M,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl($.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),j.blocks.procedures_callreturn=Object.assign({},M,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl($.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),j.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField($.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField($.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip($.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl($.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){this.hasReturnValue_="1"===e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField($.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(!(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==t.module$build$src$core$events$events.BLOCK_MOVE)){var n=!1,a=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(a.type)){n=!0;break}a=a.getSurroundParent()}while(a);n?("procedures_defnoreturn"===a.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField($.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==a.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField($.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText($.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(a=t.module$build$src$core$events$events.getGroup(),t.module$build$src$core$events$events.setGroup(e.group),this.setEnabled(n),t.module$build$src$core$events$events.setGroup(a))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},C(j.blocks);var G={},D=(t.module$build$src$core$extensions,t.module$build$src$core$field_dropdown,t.module$build$src$core$utils$xml,t.module$build$src$core$common.createBlockDefinitionsFromJsonArray),k=t.module$build$src$core$common.defineBlocks;G.blocks=D([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var B={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};t.module$build$src$core$extensions.register("math_op_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("OP",B));var U={mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation"),n="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",n),e},domToMutation:function(e){e="true"===e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){const t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},P=function(){this.getField("PROPERTY").setValidator((function(e){e="DIVISIBLE_BY"===e,this.getSourceBlock().updateShape_(e)}))};t.module$build$src$core$extensions.registerMutator("math_is_divisibleby_mutator",U,P),t.module$build$src$core$extensions.register("math_change_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var F={updateType_:function(e){"MODE"===e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(e){this.updateType_(e.getAttribute("op"))}},V=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))};t.module$build$src$core$extensions.registerMutator("math_modes_of_list_mutator",F,V),k(G.blocks);var x={},w=(t.module$build$src$core$contextmenu,t.module$build$src$core$events$events,t.module$build$src$core$extensions,t.module$build$src$core$variables,t.module$build$src$core$utils$xml,t.module$build$src$core$msg.Msg),Y=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,H=t.module$build$src$core$common.defineBlocks;x.blocks=Y([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var K={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};t.module$build$src$core$extensions.register("controls_whileUntil_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("MODE",K));var X={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};t.module$build$src$core$extensions.register("controls_flow_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("FLOW",X));var W={customContextMenu:function(e){if(!this.isInFlyout){var n=this.getField("VAR").getVariable(),a=n.name;if(!this.isCollapsed()&&null!==a){const r={enabled:!0};r.text=w.VARIABLES_SET_CREATE_GET.replace("%1",a),n=t.module$build$src$core$variables.generateVariableFieldDom(n),a=t.module$build$src$core$utils$xml.createElement("block"),a.setAttribute("type","variables_get"),a.appendChild(n),r.callback=t.module$build$src$core$contextmenu.callbackFactory(this,a),e.push(r)}}}};t.module$build$src$core$extensions.registerMixin("contextMenu_newGetVariableBlock",W),t.module$build$src$core$extensions.register("controls_for_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.module$build$src$core$extensions.register("controls_forEach_tooltip",t.module$build$src$core$extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),x.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var J={getSurroundLoop:function(){let e=this;do{if(x.loopTypes.has(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()&&e.type===t.module$build$src$core$events$events.BLOCK_MOVE){var n=this.getSurroundLoop(this);if(this.setWarningText(n?null:w.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){const a=t.module$build$src$core$events$events.getGroup();t.module$build$src$core$events$events.setGroup(e.group),this.setEnabled(n),t.module$build$src$core$events$events.setGroup(a)}}}};t.module$build$src$core$extensions.registerMixin("controls_flow_in_loop_check",J),H(x.blocks);var Q={},q=(t.module$build$src$core$events$events,t.module$build$src$core$extensions,t.module$build$src$core$utils$xml,t.module$build$src$core$msg.Msg),z=(t.Mutator$$module$build$src$core$mutator,t.module$build$src$core$common.createBlockDefinitionsFromJsonArray),Z=t.module$build$src$core$common.defineBlocks;Q.blocks=z([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var ee={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};t.module$build$src$core$extensions.register("logic_op_tooltip",t.module$build$src$core$extensions.buildTooltipForDropdown("OP",ee));var te={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=t.module$build$src$core$utils$xml.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const e=Object.create(null);return this.elseifCount_&&(e.elseIfCount=this.elseifCount_),this.elseCount_&&(e.hasElse=!0),e},loadExtraState:function(e){this.elseifCount_=e.elseIfCount||0,this.elseCount_=e.hasElse?1:0,this.updateShape_()},decompose:function(e){const t=e.newBlock("controls_if_if");t.initSvg();let n=t.nextConnection;for(let a=1;a<=this.elseifCount_;a++){const t=e.newBlock("controls_if_elseif");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return this.elseCount_&&(e=e.newBlock("controls_if_else"),e.initSvg(),n.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const t=[null],n=[null];let a=null;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),n.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,a=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,n,a)},saveConnections:function(e){e=e.nextConnection.targetBlock();let t=1;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t);const a=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection,e.statementConnection_=a&&a.connection.targetConnection,t++;break;case"controls_if_else":n=this.getInput("ELSE"),e.statementConnection_=n&&n.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}},rebuildShape_:function(){const e=[null],t=[null];let n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(let a=1;this.getInput("IF"+a);a++){const n=this.getInput("IF"+a),r=this.getInput("DO"+a);e.push(n.connection.targetConnection),t.push(r.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);e++)this.removeInput("IF"+e),this.removeInput("DO"+e);for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(q.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(q.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(q.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,n,a){for(let r=1;r<=this.elseifCount_;r++)t.Mutator$$module$build$src$core$mutator.reconnect(e[r],this,"IF"+r),t.Mutator$$module$build$src$core$mutator.reconnect(n[r],this,"DO"+r);t.Mutator$$module$build$src$core$mutator.reconnect(a,this,"ELSE")}};t.module$build$src$core$extensions.registerMutator("controls_if_mutator",te,null,["controls_if_elseif","controls_if_else"]);var ne=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?q.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?q.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?q.CONTROLS_IF_TOOLTIP_4:"":q.CONTROLS_IF_TOOLTIP_1}.bind(this))};t.module$build$src$core$extensions.register("controls_if_tooltip",ne);var ae={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A");const a=this.getInputTargetBlock("B");n&&a&&!this.workspace.connectionChecker.doTypeChecks(n.outputConnection,a.outputConnection)&&(t.module$build$src$core$events$events.setGroup(e.group),e=this.prevBlocks_[0],e!==n&&(n.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),n=this.prevBlocks_[1],n!==a&&(a.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),t.module$build$src$core$events$events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},re=function(){this.mixin(ae)};t.module$build$src$core$extensions.register("logic_compare",re);var oe={prevParentConnection_:null,onchange:function(e){const n=this.getInputTargetBlock("THEN"),a=this.getInputTargetBlock("ELSE"),r=this.outputConnection.targetConnection;if((n||a)&&r)for(let o=0;2>o;o++){const i=1===o?n:a;i&&!i.workspace.connectionChecker.doTypeChecks(i.outputConnection,r)&&(t.module$build$src$core$events$events.setGroup(e.group),r===this.prevParentConnection_?(this.unplug(),r.getSourceBlock().bumpNeighbours()):(i.unplug(),i.bumpNeighbours()),t.module$build$src$core$events$events.setGroup(!1))}this.prevParentConnection_=r}};t.module$build$src$core$extensions.registerMixin("logic_ternary",oe),Z(Q.blocks);var ie={},se=(t.module$build$src$core$utils$xml,t.module$build$src$core$xml,t.Align$$module$build$src$core$input,t.module$build$src$core$connection_type.ConnectionType,t.module$build$src$core$field_dropdown.FieldDropdown),le=t.module$build$src$core$msg.Msg,ce=(t.Mutator$$module$build$src$core$mutator,t.module$build$src$core$common.createBlockDefinitionsFromJsonArray),ue=t.module$build$src$core$common.defineBlocks;ie.blocks=ce([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),ie.blocks.lists_create_with={init:function(){this.setHelpUrl(le.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator$$module$build$src$core$mutator(["lists_create_with_item"],this)),this.setTooltip(le.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("lists_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let a=0;a<this.itemCount_;a++){const t=e.newBlock("lists_create_with_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){var n=e.getInputTargetBlock("STACK");for(e=[];n;)n.isInsertionMarker()||e.push(n.valueConnection_),n=n.getNextBlock();for(n=0;n<this.itemCount_;n++){const t=this.getInput("ADD"+n).connection.targetConnection;t&&-1===e.indexOf(t)&&t.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),n=0;n<this.itemCount_;n++)t.Mutator$$module$build$src$core$mutator.reconnect(e[n],this,"ADD"+n)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}const n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(le.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const n=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$input.RIGHT);0===e&&n.appendField(le.LISTS_CREATE_WITH_INPUT_WITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},ie.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(le.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(le.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},ie.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(le.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(le.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},ie.blocks.lists_indexOf={init:function(){const e=[[le.LISTS_INDEX_OF_FIRST,"FIRST"],[le.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(le.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(le.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new se(e),"END"),this.setInputsInline(!0);const t=this;this.setTooltip((function(){return le.LISTS_INDEX_OF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")}))}},ie.blocks.lists_getIndex={init:function(){var e=[[le.LISTS_GET_INDEX_GET,"GET"],[le.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[le.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[le.LISTS_GET_INDEX_FROM_START,"FROM_START"],[le.LISTS_GET_INDEX_FROM_END,"FROM_END"],[le.LISTS_GET_INDEX_FIRST,"FIRST"],[le.LISTS_GET_INDEX_LAST,"LAST"],[le.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(le.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),e=new se(e,(function(e){e="REMOVE"===e,this.getSourceBlock().updateStatement_(e)})),this.appendValueInput("VALUE").setCheck("Array").appendField(le.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),le.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(le.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);const t=this;this.setTooltip((function(){const e=t.getFieldValue("MODE"),n=t.getFieldValue("WHERE");let a="";switch(e+" "+n){case"GET FROM_START":case"GET FROM_END":a=le.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":a=le.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":a=le.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":a=le.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":a=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":a=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":a=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":a=le.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":a=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":a=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":a=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":a=le.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!==n&&"FROM_END"!==n||(a+="  "+("FROM_START"===n?le.LISTS_INDEX_FROM_START_TOOLTIP:le.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",t.workspace.options.oneBasedIndex?"#1":"#0")),a}))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");e.setAttribute("statement",!this.outputConnection);const n=this.getInput("AT").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(e){const t="true"===e.getAttribute("statement");this.updateStatement_(t),e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(e){e.isStatement?this.updateStatement_(!0):"string"===typeof e&&this.domToMutation(t.module$build$src$core$xml.textToDom(e))},updateStatement_:function(e){e!==!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),le.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(le.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const t=new se(this.WHERE_OPTIONS,(function(t){const n="FROM_START"===t||"FROM_END"===t;if(n!==e){const e=this.getSourceBlock();return e.updateAt_(n),e.setFieldValue(t,"WHERE"),null}}));this.getInput("AT").appendField(t,"WHERE"),le.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},ie.blocks.lists_setIndex={init:function(){const e=[[le.LISTS_SET_INDEX_SET,"SET"],[le.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[le.LISTS_GET_INDEX_FROM_START,"FROM_START"],[le.LISTS_GET_INDEX_FROM_END,"FROM_END"],[le.LISTS_GET_INDEX_FIRST,"FIRST"],[le.LISTS_GET_INDEX_LAST,"LAST"],[le.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(le.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(le.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new se(e),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(le.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(le.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);const t=this;this.setTooltip((function(){const e=t.getFieldValue("MODE"),n=t.getFieldValue("WHERE");let a="";switch(e+" "+n){case"SET FROM_START":case"SET FROM_END":a=le.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":a=le.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":a=le.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":a=le.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":a=le.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":a=le.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":a=le.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":a=le.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!==n&&"FROM_END"!==n||(a+="  "+le.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"#1":"#0")),a}))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation"),n=this.getInput("AT").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at",n),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),le.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(le.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const t=new se(this.WHERE_OPTIONS,(function(t){const n="FROM_START"===t||"FROM_END"===t;if(n!==e){const e=this.getSourceBlock();return e.updateAt_(n),e.setFieldValue(t,"WHERE"),null}}));this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(t,"WHERE")}},ie.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[le.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[le.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[le.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[le.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[le.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[le.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(le.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(le.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),le.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(le.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(le.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");var n=this.getInput("AT1").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE;return e.setAttribute("at1",n),n=this.getInput("AT2").type===t.module$build$src$core$connection_type.ConnectionType.INPUT_VALUE,e.setAttribute("at2",n),e},domToMutation:function(e){const t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e,t){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),t?(this.appendValueInput("AT"+e).setCheck("Number"),le.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(le.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e);const n=new se(this["WHERE_OPTIONS_"+e],(function(n){const a="FROM_START"===n||"FROM_END"===n;if(a!==t){const t=this.getSourceBlock();return t.updateAt_(e,a),t.setFieldValue(n,"WHERE"+e),null}}));this.getInput("AT"+e).appendField(n,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),le.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},ie.blocks.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},ie.blocks.lists_split={init:function(){const e=this,t=new se([[le.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[le.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],(function(t){e.updateType_(t)}));this.setHelpUrl(le.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(t,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(le.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((function(){const t=e.getFieldValue("MODE");if("SPLIT"===t)return le.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===t)return le.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+t)}))},updateType_:function(e){if(this.getFieldValue("MODE")!==e){const e=this.getInput("INPUT").connection;e.setShadowDom(null);const t=e.targetBlock();t&&(e.disconnect(),t.isShadow()?t.dispose():this.bumpNeighbours())}"SPLIT"===e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const e=t.module$build$src$core$utils$xml.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},ue(ie.blocks);var _e={},pe=t.module$build$src$core$common.createBlockDefinitionsFromJsonArray,de=t.module$build$src$core$common.defineBlocks;_e.blocks=pe([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),de(_e.blocks);var Oe={};return Oe.colour=_e,Oe.lists=ie,Oe.logic=Q,Oe.loops=x,Oe.math=G,Oe.procedures=j,Oe.texts=E,Oe.variables=c,Oe.variablesDynamic=n,Oe.blocks=Object.assign({},_e.blocks,ie.blocks,Q.blocks,x.blocks,G.blocks,j.blocks,c.blocks,n.blocks),Oe.__namespace__=t,Oe}))},"788f":function(e,t,n){},"7f8a":function(e,t,n){"use strict";n("b79d")},"836c":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAABHCAYAAABLeWqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATbSURBVHgB7ZxbiFVVHId/x7Sbld2sNLUULLs6WXbRRnMqIauHoCKkHioMCuql94KCoAejekmQqJfuL4Fh9lBKjUmRRRlY2IVsgtGpcEomLXP1/WedkUnncM6c819773P54Js1c9gH9v7N2muvvdbau6QcCSEcTTEd5+BUPBb346/4I/aVSqX9ajcIZgrejq/hT/hPGJuDuAvX4f14glodDnIWPo/fh/oYxDV4uVoNDmoiPor/Bh+G8BmcqlbADgR7Qxq24sVqZjiAK3BnSMsBvEvNSDmg/pANf+EtaibY4bk4ELJlN96qRJTkCDt6HMUneImypx/Pp1/1h5yZIF+eUD4BGWfhWiXApSZRg06kWIBv48nKlydxPW6nVg3KgbpCIhSrgefhCuzBq/B0FYvf8SvcgO/h14R2QHVQc0gEY9suwbtxJR6v5sLuBz/ENfg+gR2s9YtVQwrxJvQBfBAvVGvwM67G1wlrV7WNK4ZEODMpHsKHcbJakwFch48R1i+VNjoipPJpdR8+hWeoPRjCx/HZsdqt/4VkHUGK5/AmtSeb8BGC2jb6w0MhEdA8xavALLU31sDfRlC9Ix8Mh0RAsynsw+nqYPyGy0ZqVImAjlIM6Gp1GE0fziWofdYptPanE9CRzFC8gA3fu61Sh0rcYT8spHnqUIkumqNpFlL7TdnUzt84aCF9qg6V6KXhHrKQXsSab/bajJftxwSS2kL5ljocjnWs37FfRjqTNmi2EVtv4q8+vsFuKpD1vuPwLX/8SXEDvqEOW/HmkYCMQ2PcfLiH4l7F4c92vOLZ3f/T2EMWP1TdmtNvAW4I7cMmXK564ItLcUuIKzxakS/xzmo51DJ8a9ssVhy+vR7PVHNj83PW7qzmtNpYyxfGNVtCYMcoBnUPduPZag4smM34Jn4wulGuhbrn3QjMZkts9MCmlCw4myQ4ScXArtZ2Gf8Y38XPCWZAdeI2zU1op1LY4J2NbNpE5YpymQXfKXZfvsAd2E8ou1V0CO2VkB3rlRDvtQDDsNOTFGd1s6KrfPonIUlIYHN25yg7pilOuychVUjzcaKyJdl9Z6qQ8ljLeJ0SkbImZc1CJcJ1pZsR4rKcncq+o7kPJ49ntUitpKhJFyifnrg9cpGkBqcIKasO5Fj0KAEpQlqi/EgyyZoipDxngxcpAd5LlK1TZ3Poqa6atTCTxrtPjngfzHzlG5Bxo5zxPqBkfZVx4H66e4eU7P5pHBQ3JNoju1e7UvlzEfviOvjnWZNsPc9s5Y8tSnOtTZ4hdeEkFYM5csQzpGUqDoWtSVmORFZjYbmNdMElJHboFOUzhlQJaxtnyAmvmmSdyCI9WmEPJ14qJ7xCWqzi4Xaj7RVSt4qH2z/OK6Q8x5AqYQ9Mu7xgoeGQ2BF7kqmIb3s4TU7P53nUpCLWohGulQMeIXWpuLgs5PcIaZuKy3Y50PDIZHmRly3ndR/sahD75y1ilHKvGqThmsROBAp7qcoLGFQMXsXlHgG5Q61aiTtCfnyLq0LCFSZusJOX4Ush/auBjL24FpPMuRnu09yjCfGdAtco3iIsVZzdbfQRVlvq9xl+pPgyhM32dKMSkjSkwwmxkbeQzkUbObDHNWwZob3fZIriWytsG3sE3d4zYm+w2VP+29Y82iL0vnI7mBn/AWCEvFSwHtVWAAAAAElFTkSuQmCC"},"8b1a":function(e,t,n){"use strict";n("2e32")},"8d58":function(e,t,n){},"9cdf":function(e,t,n){},"9d04":function(e,t,n){},adb6:function(e,t,n){"use strict";n("e216")},b549:function(e,t,n){"use strict";n.r(t);var a=n("7a23");const r=e=>(Object(a["M"])("data-v-cac31ae4"),e=e(),Object(a["K"])(),e),o={class:"blockly-editor page"},i=r(()=>Object(a["m"])("div",{class:"logo"},null,-1)),s=Object(a["n"])(" 玩法规则 "),l={class:"connect-text"},c={class:"block-box container"},u={id:"blocklyDiv"},_={class:"blockly-info"},p={class:"info-card"},d={style:{"margin-bottom":"10px"}},O=r(()=>Object(a["m"])("span",{style:{color:"#faad14","font-size":"14px","margin-left":"10px"}},"当前暂未支持连续识别同一ID值",-1)),T={class:"info-card"},E={class:"info-header"},m={class:"text-right"},b={class:"var-info-box"},A=["title"],h={class:"var-value"},R={class:"info-card"},I=r(()=>Object(a["m"])("div",{class:"info-header"}," 状态信息 ",-1)),v=r(()=>Object(a["m"])("span",{class:"connected"},null,-1)),g=Object(a["n"])("已连接 "),N=[v,g],S=r(()=>Object(a["m"])("span",{class:"connected offline"},null,-1)),f=Object(a["n"])("未连接 "),L=[S,f],j={class:"info-card console"};function $(e,t,n,r,v,g){const S=Object(a["S"])("a-button"),f=Object(a["S"])("HeaderNav"),$=Object(a["S"])("VariableDrawer"),C=Object(a["S"])("a-popconfirm"),y=Object(a["S"])("InfoCircleOutlined"),M=Object(a["S"])("a-form-item"),G=Object(a["S"])("a-timeline-item"),D=Object(a["S"])("a-timeline"),k=Object(a["S"])("BlocklyModal"),B=Object(a["S"])("GameRule");return Object(a["J"])(),Object(a["l"])("div",o,[Object(a["o"])(f,{"sub-title":e.$t(e.LANG.HOME_HEADER.SUBTITLE),onBack:e.navigatorBack},{default:Object(a["eb"])(()=>[i,Object(a["o"])(S,{class:"rule-btn",shape:"round",onClick:t[0]||(t[0]=t=>e.visibleOfGameRule=!0)},{default:Object(a["eb"])(()=>[s]),_:1}),Object(a["o"])(S,{class:"header-btn",onClick:e.saveCode},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.BLOCKLY_MENU.SAVE)),1)]),_:1},8,["onClick"]),Object(a["o"])(S,{key:"2",class:"header-btn",onClick:e.connectJoyo},{default:Object(a["eb"])(()=>[Object(a["m"])("span",l,[Object(a["m"])("span",{class:Object(a["z"])(["connect-dot",{active:e.connectStatus}])},null,2),Object(a["n"])(" "+Object(a["V"])(e.connectStatus?e.$t(e.LANG.BLOCKLY_MENU.DISCONNECT):e.$t(e.LANG.BLOCKLY_MENU.CONNECT)),1)])]),_:1},8,["onClick"]),Object(a["o"])(S,{type:"primary",class:"header-btn",onClick:e.runCode},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.runStatus?e.$t(e.LANG.BLOCKLY_MENU.STOP):e.$t(e.LANG.BLOCKLY_MENU.RUN)),1)]),_:1},8,["onClick"])]),_:1},8,["sub-title","onBack"]),Object(a["o"])($,{workspace:e.workspace,"variable-drawer-visible":e.variableDrawerVisible,onClose:t[1]||(t[1]=t=>e.variableDrawerVisible=!1)},null,8,["workspace","variable-drawer-visible"]),Object(a["m"])("div",c,[Object(a["m"])("div",u,[Object(a["o"])(C,{title:e.$t(e.LANG.BLOCKLY_MENU.CLEAR_CANVAS_CONFIRM),"ok-text":e.$t(e.LANG.COMMON.CONFIRM),"cancel-text":e.$t(e.LANG.COMMON.CANCEL),onConfirm:t[2]||(t[2]=t=>e.clearCanvas())},{default:Object(a["eb"])(()=>[Object(a["o"])(S,{class:"clear-canvas",shape:"round"},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.BLOCKLY_MENU.CLEAR_CANVAS)),1)]),_:1})]),_:1},8,["title","ok-text","cancel-text"])]),Object(a["m"])("div",_,[Object(a["m"])("div",p,[Object(a["m"])("div",d,[Object(a["o"])(y,{style:{color:"#faad14","vertical-align":"middle"}}),O])]),Object(a["m"])("div",T,[Object(a["m"])("div",E,[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.VARIABLE_DRAWER.VARIABLE_MSG))+" ",1),Object(a["m"])("div",m,[Object(a["o"])(S,{shape:"round",class:"create-var",onClick:e.toggleVariableDrawerVisible},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t(e.LANG.VARIABLE_DRAWER.VARIABLE_MGR)),1)]),_:1},8,["onClick"])])]),Object(a["fb"])(Object(a["m"])("p",{class:"placeholder-text"},Object(a["V"])(e.$t(e.LANG.VARIABLE_DRAWER.VARIABLE_EMPTY)),513),[[a["bb"],!e.varInfo.length]]),Object(a["m"])("div",b,[(Object(a["J"])(!0),Object(a["l"])(a["b"],null,Object(a["Q"])(e.varInfo,(e,t)=>(Object(a["J"])(),Object(a["l"])("p",{key:t,class:"var-info"},[Object(a["m"])("span",{class:"var-label",title:t},Object(a["V"])(t),9,A),Object(a["m"])("span",h,Object(a["V"])(e||0===e?e:"--"),1)]))),128))])]),Object(a["m"])("div",R,[I,Object(a["o"])(M,{label:"连接状态"},{default:Object(a["eb"])(()=>[Object(a["fb"])(Object(a["m"])("div",null,N,512),[[a["bb"],e.connectStatus]]),Object(a["fb"])(Object(a["m"])("div",null,L,512),[[a["bb"],!e.connectStatus]])]),_:1}),Object(a["o"])(M,{label:"ID值"},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.lastOID),1)]),_:1})]),Object(a["m"])("div",j,[Object(a["o"])(D,null,{default:Object(a["eb"])(()=>[(Object(a["J"])(!0),Object(a["l"])(a["b"],null,Object(a["Q"])(e.debugInfo,e=>(Object(a["J"])(),Object(a["j"])(G,{key:e.msg,color:e.color},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.msg),1)]),_:2},1032,["color"]))),128))]),_:1})])])]),Object(a["o"])(k),Object(a["o"])(B,{modelValue:e.visibleOfGameRule,"onUpdate:modelValue":t[3]||(t[3]=t=>e.visibleOfGameRule=t),"rule-book":e.ruleBook,onUpdateRuleBook:e.updateRuleBook},null,8,["modelValue","rule-book","onUpdateRuleBook"])])}var C=n("afbc"),y=n("6605"),M=n("1740");const G=Object(a["m"])("p",null,"游戏配件",-1),D=Object(a["m"])("p",{style:{"margin-top":"20px"}}," 玩法流程 ",-1);function k(e,t,n,r,o,i){const s=Object(a["S"])("a-textarea"),l=Object(a["S"])("a-modal");return Object(a["J"])(),Object(a["l"])("div",null,[Object(a["o"])(l,{visible:e.popVisible,"onUpdate:visible":t[2]||(t[2]=t=>e.popVisible=t),class:"game-rule-book",width:800,"cancel-text":e.$t(e.LANG.COMMON.OK_TEXT),"ok-text":"修改玩法",title:"玩法规则",onOk:e.handleOk,onCancel:e.handleCancel},{default:Object(a["eb"])(()=>[G,Object(a["o"])(s,{value:e.tokenList,"onUpdate:value":t[0]||(t[0]=t=>e.tokenList=t),"auto-size":{maxRows:4},placeholder:"此游戏所需配件、道具等","allow-clear":""},null,8,["value"]),D,Object(a["o"])(s,{value:e.gamePlay,"onUpdate:value":t[1]||(t[1]=t=>e.gamePlay=t),"auto-size":{minRows:6,maxRows:14},placeholder:"此游戏玩法说明介绍","allow-clear":""},null,8,["value"])]),_:1},8,["visible","cancel-text","onOk","onCancel"])])}var B=n("5502"),U=n("4ad9"),P=Object(a["p"])({components:{},props:{modelValue:{type:Boolean,default:!1},ruleBook:{type:Object,default:()=>({tokenList:"",gamePlay:""})}},emits:["update:modelValue","updateRuleBook"],setup(e,{emit:t}){const n=Object(a["N"])({popVisible:!1,tokenList:"",gamePlay:""});function r(){t("update:modelValue",!1)}function o(){t("updateRuleBook",{tokenList:n.tokenList,gamePlay:n.gamePlay}),t("update:modelValue",!1)}Object(a["cb"])(()=>e.modelValue,()=>{n.popVisible=e.modelValue}),Object(a["cb"])(()=>e.ruleBook.tokenList,e=>{n.tokenList=e}),Object(a["cb"])(()=>e.ruleBook.gamePlay,e=>{n.gamePlay=e});Object(B["b"])();return{handleCancel:r,handleOk:o,LANG:U["a"],...Object(a["Y"])(n)}}}),F=(n("e2e2"),n("6b0d")),V=n.n(F);const x=V()(P,[["render",k]]);var w=x,Y=n("2f91");function H(e,t){const n=Math.floor(Math.floor(e/256/256)*t/256),a=Math.floor(Math.floor(e/256%256)*t/256),r=Math.floor(Math.floor(e%256)*t/256);return 256*n*256+256*a+r}let K=null;function X(){clearTimeout(K)}const W=(e,t,n)=>{clearTimeout(K),isNaN(n)&&(n=Number(n));const a=!1;t&&setTimeout(()=>{X()},1e3*t);const r=[0,0,0,0,0,0,0,0,0,0,0,0];if("run"===e){const e=100;let t=0;const a=()=>{const o=t%8;for(let e=0;e<8;e++)r[e]=0;r[o]=n,r[o-1<0?o+8-1:o-1]=H(n,180),r[o-2<0?o+8-2:o-2]=H(n,120),r[o-3<0?o+8-3:o-3]=H(n,50),r[o-4<0?o+8-4:o-4]=H(n,10),K=setTimeout(()=>{Object(Y["c"])({colors:r,bright:1}),t+=1,t>=100&&(t=0),a()},e)};a()}else if("star"===e){const e=500;let t=e;for(let a=0;a<8;a++)r[a]=n;const o=()=>{a?Object(Y["f"])():K=setTimeout(()=>{t%1e3!==0?Object(Y["f"])():Object(Y["c"])({colors:r,bright:1}),t+=500,t>=1e5&&(t=0),o()},e)};o()}else if("breath"===e){const e=50;let t=0;for(let a=0;a<8;a++)r[a]=n;const o=()=>{a?Object(Y["f"])():K=setTimeout(()=>{const e=255-(t<150?t:300-t),a=H(n,e);for(let t=0;t<8;t++)r[t]=a;Object(Y["c"])({colors:r,bright:1}),t+=4,t>=300&&(t=0),o()},e)};o()}else if("boom"===e){const e=400;let t=e;for(let a=0;a<4;a++)r[2*a]=n,r[2*a+1]=0;const o=[0,0,0,0,0,0,0,0,0,0,0,0];for(let a=0;a<4;a++)o[2*a]=0,o[2*a+1]=n;const i=()=>{a?Object(Y["f"])():K=setTimeout(()=>{t%1e3!==0?Object(Y["c"])({colors:o,bright:1}):Object(Y["c"])({colors:r,bright:1}),t+=500,t>=1e5&&(t=0),i()},e)};i()}};var J=n("b7fd"),Q=n.n(J),q=n("fc06");
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function z(e){return{saveInfo:J["serialization"].blocks.save(e,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:J["common"].getBlockTypeCounts(e,!0)}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z{init({contextMenu:e=!0,shortcut:t=!0}={contextMenu:!0,shortcut:!0},n){e&&(this.blockCopyToStorageContextMenu(),this.blockPasteFromStorageContextMenu(n)),t&&(J["ShortcutRegistry"].registry.unregister(J["ShortcutItems"].names.COPY),J["ShortcutRegistry"].registry.unregister(J["ShortcutItems"].names.CUT),J["ShortcutRegistry"].registry.unregister(J["ShortcutItems"].names.PASTE),this.blockCopyToStorageShortcut(),this.blockCutToStorageShortcut(),this.blockPasteFromStorageShortcut(n))}blockCopyToStorageContextMenu(){const e={displayText:function(){return J["Msg"]["CROSS_TAB_COPY"]?J["Msg"]["CROSS_TAB_COPY"]:"Copy"},preconditionFn:function(e){return J["selected"].isDeletable()&&J["selected"].isMovable()?"enabled":"disabled"},callback:function(e){const t=JSON.stringify(z(e.block));localStorage.setItem("blocklyStash",t)},scopeType:J["ContextMenuRegistry"].ScopeType.BLOCK,id:"blockCopyToStorage",weight:0};J["ContextMenuRegistry"].registry.register(e)}blockPasteFromStorageContextMenu(e){const t={displayText:function(){return J["Msg"]["CROSS_TAB_PASTE"]?J["Msg"]["CROSS_TAB_PASTE"]:"Paste"},preconditionFn:function(e){const t=JSON.parse(localStorage.getItem("blocklyStash"));return t&&e.workspace.isCapacityAvailable(t.typeCounts)?"enabled":"disabled"},callback:function(t){const n=localStorage.getItem("blocklyStash"),a=JSON.parse(n);try{t.workspace.paste(a["saveInfo"])}catch(r){if(!(r instanceof TypeError&&e))throw r;e()}},scopeType:J["ContextMenuRegistry"].ScopeType.WORKSPACE,id:"blockPasteFromStorage",weight:0};J["ContextMenuRegistry"].registry.register(t)}blockCopyToStorageShortcut(){const e={name:"copy",preconditionFn:function(e){return!e.options.readOnly&&!J["Gesture"].inProgress()&&J["selected"]&&J["selected"].isDeletable()&&J["selected"].isMovable()&&!J["selected"].isInMutator},callback:function(e,t){t.preventDefault(),e.hideChaff();const n=JSON.stringify(z(J["selected"]));return localStorage.setItem("blocklyStash",n),!0}};J["ShortcutRegistry"].registry.register(e);const t=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.C,[J["utils"].KeyCodes.CTRL]);J["ShortcutRegistry"].registry.addKeyMapping(t,e.name);const n=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.C,[J["utils"].KeyCodes.ALT]);J["ShortcutRegistry"].registry.addKeyMapping(n,e.name);const a=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.C,[J["utils"].KeyCodes.META]);J["ShortcutRegistry"].registry.addKeyMapping(a,e.name)}blockCutToStorageShortcut(){const e={name:"cut",preconditionFn:function(e){return!e.options.readOnly&&!J["Gesture"].inProgress()&&J["selected"]&&J["selected"].isDeletable()&&J["selected"].isMovable()&&!J["selected"].workspace.isFlyout},callback:function(e,t){t.preventDefault();const n=JSON.stringify(z(J["selected"]));return localStorage.setItem("blocklyStash",n),J["Events"].setGroup(!0),J["selected"].dispose(!0),J["Events"].setGroup(!1),!0}};J["ShortcutRegistry"].registry.register(e);const t=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.X,[J["utils"].KeyCodes.CTRL]);J["ShortcutRegistry"].registry.addKeyMapping(t,e.name);const n=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.X,[J["utils"].KeyCodes.ALT]);J["ShortcutRegistry"].registry.addKeyMapping(n,e.name);const a=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.X,[J["utils"].KeyCodes.META]);J["ShortcutRegistry"].registry.addKeyMapping(a,e.name)}blockPasteFromStorageShortcut(e){const t={name:"paste",preconditionFn:function(e){if(e.options.readOnly||J["Gesture"].inProgress())return!1;const t=JSON.parse(localStorage.getItem("blocklyStash"));return!(!t||!e.isCapacityAvailable(t.typeCounts))},callback:function(t,n){n.preventDefault();const a=localStorage.getItem("blocklyStash"),r=JSON.parse(a);try{t.paste(r["saveInfo"])}catch(n){if(!(n instanceof TypeError&&e))throw n;e()}return!0}};J["ShortcutRegistry"].registry.register(t);const n=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.V,[J["utils"].KeyCodes.CTRL]);J["ShortcutRegistry"].registry.addKeyMapping(n,t.name);const a=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.V,[J["utils"].KeyCodes.ALT]);J["ShortcutRegistry"].registry.addKeyMapping(a,t.name);const r=J["ShortcutRegistry"].registry.createSerializedKey(J["utils"].KeyCodes.V,[J["utils"].KeyCodes.META]);J["ShortcutRegistry"].registry.addKeyMapping(r,t.name)}}var ee,te=n("54ca"),ne=n.n(te);(function(e){e["VAR"]="VAR",e["LIST"]="LIST"})(ee||(ee={}));const ae=(e,t=[{name:"value",type:"VAR"},{name:"list_1",type:"LIST"}])=>{};var re=n("a72e"),oe={kind:"category",name:re["a"].TOOLBOX_LOGIC,cssConfig:{container:"category-logic"},contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"controls_ifelse"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"}]},ie={kind:"category",name:re["a"].TOOLBOX_LOOP,cssConfig:{container:"category-loop"},contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"custom_controls_for"},{kind:"block",type:"custom_controls_forEach"},{kind:"block",type:"controls_flow_statements"}]},se={kind:"category",name:re["a"].TOOLBOX_MATH,cssConfig:{container:"category-math"},contents:[{kind:"block",type:"math_number"},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"},inputs:{A:{shadow:{type:"math_number",fields:{NUM:1}}},B:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"math_round",inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:3.1}}}}},{kind:"block",type:"math_modulo",inputs:{DIVIDEND:{shadow:{type:"math_number",fields:{NUM:64}}},DIVISOR:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"math_constrain",inputs:{VALUE:{shadow:{type:"math_number",fields:{NUM:50}}},LOW:{shadow:{type:"math_number",fields:{NUM:1}}},HIGH:{shadow:{type:"math_number",fields:{NUM:100}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}},{kind:"block",type:"math_on_list",inputs:{LIST:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}}}},{kind:"block",type:"math_trig",inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:45}}}}},{kind:"block",type:"math_constant"},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}}]};var le={kind:"category",name:re["a"].TOOLBOX_LIST,cssConfig:{container:"category-list"},contents:[{kind:"block",type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}},{kind:"block",type:"variables_set_list",fields:{VAR:{type:"LIST",name:"list_1"}}},{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_create_with",inputs:{ADD0:{block:{type:"math_number",id:"Rf7_0x9O?,U4xs4g:P.2",fields:{NUM:0}}},ADD1:{block:{type:"math_number",id:"h.CMI#o%3XqY1#QWPzay",fields:{NUM:1}}},ADD2:{block:{type:"math_number",id:"%1^c%D7r).a@vKC#LLLU",fields:{NUM:2}}}}},{kind:"block",type:"lists_repeat",inputs:{ITEM:{},NUM:{shadow:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length",inputs:{VALUE:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}}}},{kind:"block",type:"lists_isEmpty",inputs:{VALUE:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}}}},{kind:"block",type:"lists_indexOf",inputs:{VALUE:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}},FIND:{block:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"list_include",inputs:{LIST:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}},NAME:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"lists_getIndex",inputs:{VALUE:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}},AT:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"list_push",inputs:{LIST:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}},NAME:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"lists_setIndex",inputs:{LIST:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}},AT:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"lists_getSublist",inputs:{LIST:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}},AT1:{block:{type:"math_number",fields:{NUM:1}}},AT2:{block:{type:"math_number",fields:{NUM:2}}}}},{kind:"block",type:"lists_split",inputs:{INPUT:{shadow:{type:"text",fields:{TEXT:"1,2,3"}}},DELIM:{shadow:{type:"text",fields:{TEXT:","}}}}},{kind:"block",type:"lists_sort",inputs:{LIST:{block:{type:"variables_get_list",fields:{VAR:{type:"LIST",name:"list_1"}}}}}},{kind:"block",type:"lists_reverse"}]},ce={kind:"category",name:re["a"].TOOLBOX_VAR,cssConfig:{container:"category-var"},contents:[{kind:"block",type:"variables_get_var",fields:{VAR:{type:"VAR",name:"value_1"}}},{kind:"block",type:"variables_set_var",fields:{VAR:{type:"VAR",name:"value_1"}},inputs:{VALUE:{block:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"custom_math_change",fields:{VAR:{type:"VAR",name:"value_1"}},inputs:{DELTA:{block:{type:"math_number",fields:{NUM:1}}}}}]},ue={kind:"category",name:re["a"].TOOLBOX_FUNC,custom:"PROCEDURE",cssConfig:{container:"category-func"},contents:[{kind:"block",type:"procedures_defnoreturn"}]},_e={kind:"category",name:re["a"].TOOLBOX_LIGHT,cssConfig:{container:"category-joyo"},contents:[{kind:"block",type:"set_light_by_ui"},{kind:"block",type:"set_light"},{kind:"block",type:"set_all_light",inputs:{color:{block:{type:"text",fields:{TEXT:"0xffffff"}}}}},{kind:"block",type:"set_all_light_color",inputs:{R:{shadow:{type:"math_number",fields:{NUM:255}}},G:{shadow:{type:"math_number",fields:{NUM:255}}},B:{shadow:{type:"math_number",fields:{NUM:255}}}}},{kind:"block",type:"set_light_animation",inputs:{time:{shadow:{type:"math_number",fields:{NUM:5}}},color:{block:{type:"text",fields:{TEXT:"0xffffff"}}}}},{kind:"block",type:"clear_light"}]},pe={kind:"category",name:re["a"].TOOLBOX_AUDIO,cssConfig:{container:"category-joyo"},contents:[{kind:"block",type:"play_audio"}]},de={kind:"category",name:re["a"].TOOLBOX_IDENTIFY,cssConfig:{container:"category-joyo"},contents:[{kind:"block",type:"receive_letter"},{kind:"block",type:"receive_number"},{kind:"block",type:"receive_symbol"},{kind:"block",type:"receive_card"},{kind:"block",type:"receive_card_num",inputs:{NAME:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"receive_sticker",inputs:{NAME:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"receive_color"},{kind:"block",type:"receive_ID",inputs:{NAME:{shadow:{type:"math_number",fields:{NUM:1801}}}}}]},Oe={kind:"category",name:re["a"].TOOLBOX_TOOL,cssConfig:{container:"category-joyo"},contents:[{kind:"block",type:"consolelog"},{kind:"block",type:"printany",inputs:{NAME:{shadow:{type:"text",fields:{TEXT:"hello world"}}}}},{kind:"block",type:"wait_second",inputs:{NAME:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"date_now"},{kind:"block",type:"setUp"}]};const Te={kind:"categoryToolbox",contents:[_e,pe,de,oe,ie,se,ce,le,ue,Oe]};var Ee=Te,me=n("8c0b");q["javascriptGenerator"].setUp=function(e){const t=q["javascriptGenerator"].statementToCode(e,"main");return"function setUp() {\n"+t+"}\nsetUp();\n"},q["javascriptGenerator"].wait_second=function(e){const t=q["javascriptGenerator"].valueToCode(e,"NAME",q["javascriptGenerator"].ORDER_ATOMIC);return"sleepFn("+t+");\n"},q["javascriptGenerator"].consolelog=function(e){const t=q["javascriptGenerator"].nameDB_.getName(e.getFieldValue("NAME"),"VARIABLE");return'print("'+t+'", JSON.stringify('+t+"));\n"},q["javascriptGenerator"].printany=function(e){const t=q["javascriptGenerator"].valueToCode(e,"NAME",q["javascriptGenerator"].ORDER_ATOMIC),n="print("+t+");\n";return n},q["javascriptGenerator"].date_now=function(e){return["getDateNow()",q["javascriptGenerator"].ORDER_NONE]},ne.a.defineBlocksWithJsonArray([{type:"setUp",message0:re["a"].TOOL_SETUP,args0:[{type:"input_dummy"},{type:"input_statement",name:"main"}],colour:180,tooltip:"",helpUrl:""},{type:"wait_second",message0:re["a"].TOOL_WAIT,args0:[{type:"input_value",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""},{type:"consolelog",message0:re["a"].TOOL_PRINT,args0:[{type:"field_variable",name:"NAME",variable:"value"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""},{type:"printany",message0:re["a"].TOOL_PRINT_ANY,args0:[{type:"input_value",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""},{type:"date_now",message0:re["a"].TOOL_CURRENT_TIME,output:"Number",colour:230,tooltip:"",helpUrl:""}]);var be=n("6d92"),Ae=n.n(be);const he=new Ae.a;let Re=null;function Ie(e){Re=e}function ve(e,t){Re.commit("blockly/setLightArray",e),Re.commit("blockly/togglePopLightVisible",!0),he.once("updateLightColor",e=>{t(e)})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ge=4,Ne=5,Se=15,fe="white";class Le extends Q.a.Field{constructor(e,t,n){super(e,t,n),this.imgHeight_=0,this.imgWidth_=0,this.blockDisplayPixels_=null,this.SERIALIZABLE=!0,this.imgHeight_=ge,this.imgWidth_=Ne,null===this.getValue()&&this.setValue(this.getEmptyArray_()),this.fieldGroup_=null,this.blockDisplayPixels_=null}static fromJson(e){return new Le(e&&e.value,void 0,e)}doClassValidation_(e){if(!e)return null;if(!Array.isArray(e))return null;const t=e.length;return 12!==t?null:e}doValueUpdate_(e){if(super.doValueUpdate_(e),e){const t=e.length,n=e[0]?e[0].length:0;this.imgHeight_===t&&this.imgWidth_===n||(this.imgHeight_=t,this.imgWidth_=n),this.imgHeight_=e.length,this.imgWidth_=e[0]?e[0].length:0}}showEditor_(e,t){ve(this.getValue(),e=>{this.setValue(e)})}render_(){if(super.render_(),!this.getValue())return;const e=this.getValue();for(let t=0;t<this.blockDisplayPixels_.length;t++)this.blockDisplayPixels_[t].style.fill=e[t]}updateEditable(){return!0}initView(){this.blockDisplayPixels_=[];const e=[[15,0],[35,0],[50,15],[50,35],[35,50],[15,50],[0,35],[0,15]],t=[25,25],n=[];for(let a=0;a<e.length;a++){const t=Q.a.utils.dom.createSvgElement("circle",{cx:e[a][0]+5,cy:e[a][1]+5,r:Se/2,fill:fe,fill_opacity:1},this.fieldGroup_);n.push(t)}n.push(Q.a.utils.dom.createSvgElement("circle",{cx:t[0]+5,cy:t[1]+5,r:.75*Se,fill:fe,fill_opacity:1},this.fieldGroup_)),this.blockDisplayPixels_=n}updateSize_(){const e=Se*this.imgWidth_,t=Se*this.imgHeight_;this.borderRect_&&(this.borderRect_.setAttribute("width",String(e)),this.borderRect_.setAttribute("height",String(t))),this.size_.width=85,this.size_.height=60}getEmptyArray_(){const e=Array(12).fill("#000000");return e}createElementWithClassname_(e,t){const n=document.createElement(e);return n.className=t,n}}Q.a.fieldRegistry.register("field_light",Le),q["javascriptGenerator"].set_light_by_ui=function(e){const t=e.getFieldValue("light");return"bleSetLight(JSON.stringify({colors:"+JSON.stringify(t)+",bright:1}));\n"},q["javascriptGenerator"].set_light=function(e){const t=q["javascriptGenerator"].nameDB_.getName(e.getFieldValue("light"),"VARIABLE");return"bleSetLight(JSON.stringify({colors:"+t+",bright:1}));\n"},q["javascriptGenerator"].set_all_light=function(e){const t=q["javascriptGenerator"].valueToCode(e,"color",q["javascriptGenerator"].ORDER_ATOMIC),n=parseInt(t.replace(/'/g,""))||0,a=JSON.stringify(Array(12).fill(n));return"bleSetLight(JSON.stringify({colors:"+a+",bright:1}));\n"},q["javascriptGenerator"].lists_create_with_row=function(e){const t=new Array(e.itemCount_);for(let a=0;a<e.itemCount_;a++)t[a]=q["javascriptGenerator"].valueToCode(e,"ADD"+a,q["javascriptGenerator"].ORDER_NONE)||"null";const n="["+t.join(", ")+"]";return[n,q["javascriptGenerator"].ORDER_ATOMIC]},q["javascriptGenerator"].list_include=function(e){const t=q["javascriptGenerator"].valueToCode(e,"LIST",q["javascriptGenerator"].ORDER_ATOMIC),n=q["javascriptGenerator"].valueToCode(e,"NAME",q["javascriptGenerator"].ORDER_ATOMIC),a=`${t}.indexOf(${n}) >= 0`;return[a,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].set_all_light_color=function(e){const t=q["javascriptGenerator"].valueToCode(e,"R",q["javascriptGenerator"].ORDER_ATOMIC)-0,n=q["javascriptGenerator"].valueToCode(e,"G",q["javascriptGenerator"].ORDER_ATOMIC)-0,a=q["javascriptGenerator"].valueToCode(e,"B",q["javascriptGenerator"].ORDER_ATOMIC)-0,r=JSON.parse(JSON.stringify(Array(12).fill(256*t*256+256*n+a)));return"bleSetLight(JSON.stringify({colors:["+r+"],bright:1}));\n"},q["javascriptGenerator"].set_light_animation=function(e){const t=e.getFieldValue("animation"),n=q["javascriptGenerator"].valueToCode(e,"time",q["javascriptGenerator"].ORDER_ATOMIC)-0,a=q["javascriptGenerator"].valueToCode(e,"color",q["javascriptGenerator"].ORDER_ATOMIC);return`bleSetLightAnimation('${t}', ${n}, ${a});\n`},q["javascriptGenerator"].clear_light=function(e){return"clearAllLight();\n"},J["defineBlocksWithJsonArray"]([{type:"set_light_by_ui",message0:re["a"].LIGHT_SET_BY_UI,args0:[{type:"field_light",name:"light"}],colour:230,tooltip:"",helpUrl:"",previousStatement:null,nextStatement:null},{type:"set_light",message0:re["a"].LIGHT_SET_BY_ARRAY,args0:[{type:"field_variable",name:"light",variable:"item"}],colour:230,tooltip:"",helpUrl:"",previousStatement:null,nextStatement:null},{type:"set_all_light",message0:re["a"].LIGHT_SET_ALL_BY_COLOR,args0:[{type:"input_value",name:"color"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""},{type:"set_all_light_color",message0:re["a"].LIGHT_SET_ALL_BY_RGB,args0:[{type:"input_value",name:"R"},{type:"input_value",name:"G"},{type:"input_value",name:"B"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""},{type:"set_light_animation",message0:re["a"].LIGHT_SET_ANIMATION,args0:[{type:"field_dropdown",name:"animation",options:[[re["a"].LIGHT_RUN,"run"],[re["a"].LIGHT_BREATH,"breath"],[re["a"].LIGHT_BLINK,"star"],[re["a"].LIGHT_BOOM,"boom"]]},{type:"input_value",name:"time",value:0,min:0},{type:"input_value",name:"color",text:"0xffffff"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""},{type:"clear_light",message0:re["a"].LIGHT_CLEAR_ALL,previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""}]),J["Blocks"].lists_create_with_row={init:function(){this.setHelpUrl(J["Msg"].LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setInputsInline(!0),this.setMutator(new J["Mutator"](["lists_create_with_item"])),this.setTooltip(J["Msg"].LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const e=J["utils"].xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("lists_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let a=0;a<this.itemCount_;a++){const t=e.newBlock("lists_create_with_item");t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];while(t&&!t.isInsertionMarker())n.push(t.valueConnection_),t=t.nextConnection&&t.nextConnection.targetBlock();for(let a=0;a<this.itemCount_;a++){const e=this.getInput("ADD"+a).connection.targetConnection;e&&-1===n.indexOf(e)&&e.disconnect()}this.itemCount_=n.length,this.updateShape_();for(let a=0;a<this.itemCount_;a++)J["Mutator"].reconnect(n[a],this,"ADD"+a)},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;while(t){const e=this.getInput("ADD"+n);t.valueConnection_=e&&e.connection.targetConnection,t=t.nextConnection&&t.nextConnection.targetBlock(),n++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(J["Msg"].LISTS_CREATE_EMPTY_TITLE);for(let e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const t=this.appendValueInput("ADD"+e).setAlign(J["ALIGN_RIGHT"]);0===e&&t.appendField(J["Msg"].LISTS_CREATE_WITH_INPUT_WITH)}for(let e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},q["javascriptGenerator"].play_audio=function(e){const t=e.getFieldValue("NAME");return'blePlayMusic("'+t+'");\n'};const je=["01do","02re","03mi","04fa","05so","06la","07xi","08dd","amaz","blad","blo2","cbeg","chek","cnnt","csm1","csm2","endp","ev00","ev01","ev02","ev03","ev04","ev05","ev06","fbdy","fhed","fnon","gbeg","ghil","ghot","good","gret","gswa","gtal","gwin","hamm","hatc","hred","mat1","mat2","mat3","mat4","mat5","mat6","mov1","mov2","mov3","mov4","mov5","nwit","ohno","olwh","pert","poff","sk01","sk02","sk03","sk04","srb2","srbl","stat","swbm","tala","tend"],$e={};for(let yt=je.length;yt--;)$e[je[yt]]=new Audio(`audio/${je[yt]}.mp3`);function Ce(e){$e[e.newValue]&&$e[e.newValue].play()}Object(J["defineBlocksWithJsonArray"])([{type:"play_audio",message0:"%{BKY_AUDIO_PLAY_AUDIO}",args0:[{type:"field_dropdown",name:"NAME",options:[["%{BKY_AUDIO_WIN}","gwin"],["%{BKY_AUDIO_WRONG}","olwh"],["%{BKY_AUDIO_GAME_BEGIN_1}","gbeg"],["%{BKY_AUDIO_GAME_BEGIN_2}","stat"],["%{BKY_AUDIO_COUNT_DOWN}","tend"],["%{BKY_AUDIO_COUNT_LAST}","tala"],["%{BKY_AUDIO_MOVE_1}","mov1"],["%{BKY_AUDIO_MOVE_2}","mov2"],["%{BKY_AUDIO_MOVE_3}","mov3"],["%{BKY_AUDIO_MOVE_4}","mov4"],["%{BKY_AUDIO_MOVE_5}","mov5"],["%{BKY_AUDIO_MATCH_1}","mat1"],["%{BKY_AUDIO_MATCH_2}","mat2"],["%{BKY_AUDIO_MATCH_3}","mat3"],["%{BKY_AUDIO_MATCH_4}","mat4"],["%{BKY_AUDIO_MATCH_5}","mat5"],["%{BKY_AUDIO_FIND_NOTHING}","fnon"],["%{BKY_AUDIO_FIND_TARGET}","fhed"],["%{BKY_AUDIO_FIND_TARGET_2}","fbdy"],["%{BKY_AUDIO_CHECK}","chek"],["%{BKY_AUDIO_DO}","01do"],["%{BKY_AUDIO_RE}","02re"],["%{BKY_AUDIO_MI}","03mi"],["%{BKY_AUDIO_FA}","04fa"],["%{BKY_AUDIO_SO}","05so"],["%{BKY_AUDIO_LA}","06la"],["%{BKY_AUDIO_XI}","07xi"]]}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""}]),q["javascriptGenerator"].play_audio=function(e){const t=e.getFieldValue("NAME");return'blePlayMusic("'+t+'");\n'},q["javascriptGenerator"].receive_letter=function(e){const t=e.getFieldValue("NAME");return[t,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].receive_number=function(e){const t=e.getFieldValue("NAME");return[t,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].receive_symbol=function(e){const t=e.getFieldValue("NAME");return[t,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].receive_card=function(e){const t=e.getFieldValue("NAME");return[t,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].receive_card_num=function(e){const t=q["javascriptGenerator"].valueToCode(e,"NAME",q["javascriptGenerator"].ORDER_ATOMIC);return[t-0+2230,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].receive_sticker=function(e){const t=q["javascriptGenerator"].valueToCode(e,"NAME",q["javascriptGenerator"].ORDER_ATOMIC);return[t-0+1800,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].receive_color=function(e){const t=e.getFieldValue("NAME");return[t,q["javascriptGenerator"].ORDER_NONE]},q["javascriptGenerator"].receive_ID=function(e){const t=q["javascriptGenerator"].valueToCode(e,"NAME",q["javascriptGenerator"].ORDER_ATOMIC);return[t,q["javascriptGenerator"].ORDER_NONE]};var ye=[{alt:"黄色",hex:"#e8c61c",code:2134,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjeHFM5j8ABy4CyiKNgYUAAAAASUVORK5CYII="},{alt:"红色",hex:"#d51f2a",code:2133,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjuCqv9R8ABQkCHuBFf0sAAAAASUVORK5CYII="},{alt:"灰色",hex:"#868d98",code:2135,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjaOud8R8ABfMCqyAXJh8AAAAASUVORK5CYII="},{alt:"橙色",hex:"#dc6f25",code:2131,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjuJOv+h8ABgsCcEnxTrsAAAAASUVORK5CYII="},{alt:"绿色",hex:"#2cb34b",code:2137,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj0Nns/R8ABGMCKsW7kt8AAAAASUVORK5CYII="},{alt:"蓝色",hex:"#2f6bb4",code:2136,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj0M/e8h8ABGkCTmyJrVoAAAAASUVORK5CYII="},{alt:"粉红",hex:"#d71977",code:2132,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjuC5Z/h8ABZkCZ1JgFhgAAAAASUVORK5CYII="},{alt:"紫色",hex:"#874b9e",code:2138,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjaPee9x8ABT0CcA2MFbUAAAAASUVORK5CYII="}];ne.a.defineBlocksWithJsonArray([{type:"receive_letter",message0:re["a"].IDENTIFY_LETTER,args0:[{type:"field_dropdown",name:"NAME",options:[...Array(26)].map((e,t)=>[String.fromCharCode(65+t),(2101+t).toString()])}],output:"Number",colour:230,tooltip:"",helpUrl:""},{type:"receive_number",message0:re["a"].IDENTIFY_NUMBER,args0:[{type:"field_dropdown",name:"NAME",options:[...Array(10)].map((e,t)=>[t.toString(),(2200+t).toString()])}],output:"Number",colour:230,tooltip:"",helpUrl:""},{type:"receive_card",message0:re["a"].IDENTIFY_EMPTY_CARD,args0:[{type:"field_dropdown",name:"NAME",options:[...Array(40)].map((e,t)=>[(t+1).toString(),(2231+t).toString()])}],output:"Number",colour:230,tooltip:"",helpUrl:""},{type:"receive_card_num",message0:re["a"].IDENTIFY_EMPTY_CARD,args0:[{type:"input_value",name:"NAME"}],output:"Number",colour:230,tooltip:"",helpUrl:""},{type:"receive_sticker",message0:re["a"].IDENTIFY_STICKER,args0:[{type:"input_value",name:"NAME"}],output:"Number",colour:230,tooltip:"",helpUrl:""},{type:"receive_symbol",message0:re["a"].IDENTIFY_SYMBOL,args0:[{type:"field_dropdown",name:"NAME",options:[["+","2214"],["-","2215"],["×","2211"],["÷","2212"],["=","2213"]]}],output:"Number",colour:230,tooltip:"",helpUrl:""},{type:"receive_color",message0:re["a"].IDENTIFY_COLOR_CARD,args0:[{type:"field_dropdown",name:"NAME",options:ye.map((e,t)=>[{src:e.base64,width:30,height:30,alt:e.alt},e.code.toString()])}],output:"Number",colour:230,tooltip:"",helpUrl:""},{type:"receive_ID",message0:re["a"].IDENTIFY_ID,args0:[{type:"input_value",name:"NAME"}],output:"Number",colour:230,tooltip:"",helpUrl:""}]);n("e868");q["javascriptGenerator"].variables_get_list=q["javascriptGenerator"].variables_get,q["javascriptGenerator"].variables_set_list=q["javascriptGenerator"].variables_set,q["javascriptGenerator"].list_push=function(e){const t=q["javascriptGenerator"].valueToCode(e,"LIST",q["javascriptGenerator"].ORDER_ATOMIC),n=q["javascriptGenerator"].valueToCode(e,"NAME",q["javascriptGenerator"].ORDER_ATOMIC),a=`${t}.push(${n});\n`;return a},Object(J["defineBlocksWithJsonArray"])([{type:"variables_get_list",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}",variableTypes:["LIST"],defaultType:"LIST"}],output:"Array",style:"list_blocks"},{type:"variables_set_list",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}",variableTypes:["LIST"],defaultType:"LIST"},{type:"input_value",name:"VALUE",check:"Array"}],previousStatement:null,nextStatement:null,style:"list_blocks"},{type:"list_include",message0:re["a"].LIST_INCLUDE,args0:[{type:"input_value",name:"LIST"},{type:"input_value",name:"NAME"}],output:"Boolean",colour:230,tooltip:"",helpUrl:""},{type:"list_push",message0:re["a"].LIST_PUSH,args0:[{type:"input_value",name:"LIST"},{type:"input_value",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""}]),q["javascriptGenerator"].custom_controls_for=q["javascriptGenerator"].controls_for,q["javascriptGenerator"].custom_controls_forEach=q["javascriptGenerator"].controls_forEach,Object(J["defineBlocksWithJsonArray"])([{type:"custom_controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null,variableTypes:["VAR"],defaultType:"VAR"},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["controls_for_tooltip"]},{type:"custom_controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null,variableTypes:["VAR"],defaultType:"VAR"},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["controls_forEach_tooltip"]}]),q["javascriptGenerator"].variables_get_var=q["javascriptGenerator"].variables_get,q["javascriptGenerator"].variables_set_var=q["javascriptGenerator"].variables_set,q["javascriptGenerator"].custom_math_change=q["javascriptGenerator"].math_change,Object(J["defineBlocksWithJsonArray"])([{type:"variables_get_var",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}",variableTypes:["VAR"],defaultType:"VAR"}],output:null,style:"variable_blocks"},{type:"custom_math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}",variableTypes:["VAR"],defaultType:"VAR"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",extensions:["math_change_tooltip"]},{type:"variables_set_var",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}",variableTypes:["VAR"],defaultType:"VAR"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks"}]);var Me=n("0cdc"),Ge=n("c330");function De(e,t,n,r,o,i){const s=Object(a["S"])("LightColor");return Object(a["J"])(),Object(a["l"])("div",null,[Object(a["o"])(s)])}const ke={class:"joyo-light"},Be={class:"container"},Ue={class:"colors-panel"},Pe=["onClick"],Fe={class:"rgb-controller-box"},Ve={class:"light-panel-container"};function xe(e,t,n,r,o,i){const s=Object(a["S"])("RGBController"),l=Object(a["S"])("LightPanel"),c=Object(a["S"])("a-modal");return Object(a["J"])(),Object(a["j"])(c,{visible:e.popLightVisible,width:1e3,"ok-text":"确定","cancel-text":"取消",title:"设置灯光",onCancel:e.handleCancel,onOk:e.handleConfirm},{default:Object(a["eb"])(()=>[Object(a["m"])("div",ke,[Object(a["m"])("div",Be,[Object(a["m"])("div",Ue,[Object(a["m"])("ul",null,[(Object(a["J"])(!0),Object(a["l"])(a["b"],null,Object(a["Q"])(e.Colors,({key:t,value:n})=>(Object(a["J"])(),Object(a["l"])("li",{key:t,class:Object(a["z"])({black:t===e.ColorEnum.BLACK,white:t===e.ColorEnum.WHITE,active:n===e.selectedColor}),style:Object(a["A"])({backgroundColor:""+n}),onClick:Object(a["gb"])(t=>e.changeColor(n),["stop"])},null,14,Pe))),128)),Object(a["m"])("li",{class:Object(a["z"])({active:e.customColorActive,plus:!e.customColor,white:e.customColorActive&&"#ffffff"===e.customColor}),style:Object(a["A"])({backgroundColor:""+e.customColor}),onClick:t[0]||(t[0]=t=>e.customColorActive=!0)},null,6)])]),Object(a["m"])("div",Fe,[Object(a["o"])(s,{modelValue:e.inputValueR,"onUpdate:modelValue":t[1]||(t[1]=t=>e.inputValueR=t),title:"R",class:"red",show:e.customColorActive,onChange:e.handleRGBChange},null,8,["modelValue","show","onChange"]),Object(a["o"])(s,{modelValue:e.inputValueG,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValueG=t),class:"green",show:e.customColorActive,title:"G",onChange:e.handleRGBChange},null,8,["modelValue","show","onChange"]),Object(a["o"])(s,{modelValue:e.inputValueB,"onUpdate:modelValue":t[3]||(t[3]=t=>e.inputValueB=t),title:"B",class:"blue",show:e.customColorActive,onChange:e.handleRGBChange},null,8,["modelValue","show","onChange"])]),Object(a["m"])("div",Ve,[Object(a["o"])(l,{ref:"lightPanel","selected-color":e.selectedColor,class:"light-panel","light-array":e.initLightArray,onSyncColor:e.updateLightArray},null,8,["selected-color","light-array","onSyncColor"])])])])]),_:1},8,["visible","onCancel","onOk"])}var we;(function(e){e["WHITE"]="WHITE",e["GRAY"]="GRAY",e["BLACK"]="BLACK",e["TURQUOISEBLUE"]="TURQUOISEBLUE",e["BLUE"]="BLUE",e["BLUEVIOLET"]="BLUEVIOLET",e["PURPLE"]="PURPLE",e["CRIMSON"]="CRIMSON",e["ORANGERED"]="ORANGERED",e["ORANGE"]="ORANGE",e["YELLOW"]="YELLOW",e["GREENYELLOW"]="GREENYELLOW"})(we||(we={}));const Ye=[{key:we.WHITE,value:"#FFFFFF"},{key:we.GRAY,value:"#9C9C9C"},{key:we.BLACK,value:"#000000"},{key:we.TURQUOISEBLUE,value:"#27C8FE"},{key:we.BLUE,value:"#0061FB"},{key:we.BLUEVIOLET,value:"#4114CE"},{key:we.PURPLE,value:"#900DC6"},{key:we.CRIMSON,value:"#C51856"},{key:we.ORANGERED,value:"#EA2C04"},{key:we.ORANGE,value:"#FF6A03"},{key:we.YELLOW,value:"#FECA06"},{key:we.GREENYELLOW,value:"#35C759"}];var He,Ke,Xe;(function(e){e[e["PLAY_START"]=1]="PLAY_START",e[e["PLAY_PAUSE"]=0]="PLAY_PAUSE"})(He||(He={})),function(e){e["DELETE"]="DELETE",e["CLONE"]="CLONE",e["UNDO"]="UNDO",e["REDO"]="REDO",e["SPEED"]="SPEED"}(Ke||(Ke={})),function(e){e["PEN"]="tool-pen",e["ERASER"]="tool-eraser",e["RECTANGLE"]="tool-rectangle",e["CIRCULAR"]="tool-circle",e["MIRROR"]="tool-vertical-mirror-pen",e["PAINT"]="tool-paint-bucket",e["MOVE"]="tool-move"}(Xe||(Xe={}));const We={ref:"panelBg",class:"light-panel"},Je={ref:"lightGroup"},Qe=["data-index","onClick"];function qe(e,t,n,r,o,i){return Object(a["J"])(),Object(a["l"])("div",null,[Object(a["m"])("div",We,[Object(a["m"])("div",{ref:"lightCenter",class:Object(a["z"])(["panel-center",{selected:0===e.lightIndex,yellowBorder:0===e.lightIndex&&"#FFFFFF"===e.frames[0]}]),style:Object(a["A"])({background:e.frames[0]}),onClick:t[0]||(t[0]=t=>e.selectLight(0))},null,6),Object(a["m"])("div",Je,[(Object(a["J"])(),Object(a["l"])(a["b"],null,Object(a["Q"])(8,(t,n)=>Object(a["m"])("div",{key:n,class:Object(a["z"])([{selected:n+1===e.lightIndex,yellowBorder:n+1===e.lightIndex&&"#FFFFFF"===e.frames[e.lightIndex]},"light-btn"]),style:Object(a["A"])({background:e.frames[n+1]}),"data-index":t,onClick:t=>e.selectLight(n+1)},null,14,Qe)),64))],512)],512)])}var ze=Object(a["p"])({props:{selectedColor:{type:String,default:"#000000"},lightArray:{type:Array,default:Array(12).fill("#000000")}},emits:["sync-color"],setup(e,{emit:t}){const n=Object(a["O"])(),r=Object(a["O"])(),o=Object(a["O"])(),i=Object(a["N"])({isCenter:!1,lightIndex:-1,frames:Array(9).fill("#000000"),isPressing:!1});Object(a["cb"])(()=>e.lightArray,()=>{const t=e.lightArray.slice(0,8);i.frames=[e.lightArray[8],...t]},{deep:!0});const s=()=>{const e=r.value.children,t=e[0].offsetWidth/2,a=n.value.offsetWidth/2,o=n.value.offsetWidth/2*.65,i=parseFloat(window.getComputedStyle(n.value).borderWidth),s=360/e.length*Math.PI/180;for(let n=0;n<e.length;n++)e[n].style.left=a+Math.sin(s*n)*o-t-i+"px",e[n].style.top=a-Math.cos(s*n)*o-t-i+"px"},l=n=>{i.lightIndex=n,i.frames[n]=e.selectedColor||"#000000",t("sync-color",i.frames)},c=()=>{i.lightIndex=0},u=e=>{if(!i.isPressing)return;e.preventDefault(),e.stopPropagation();const t=document.elementFromPoint(e.pageX,e.pageY);if(-1!==t.classList.value.indexOf("panel-center")&&l(0),-1!==t.classList.value.indexOf("light-btn")){const e=parseInt(t.attributes["data-index"].value);l(e)}},_=()=>{i.isPressing=!0},p=()=>{i.isPressing=!1},d=()=>{const e=r.value.children;o.value.addEventListener("mousemove",u),n.value.addEventListener("mousedown",_),n.value.addEventListener("mouseup",p);for(let t=0;t<e.length;t++)e[t].addEventListener("mousemove",u)},O=()=>{const e=r.value.children;o.value.removeEventListener("mousemove",u),n.value.removeEventListener("mousedown",_),n.value.removeEventListener("mouseup",p);for(let t=0;t<e.length;t++)e[t].removeEventListener("mousemove",u)};return Object(a["G"])(()=>{s(),window.onresize=()=>{s()},d()}),Object(a["D"])(()=>{window.onresize=null,O()}),{panelBg:n,lightGroup:r,lightCenter:o,selectLight:l,centerBtn:c,...Object(a["Y"])(i)}}});n("1945");const Ze=V()(ze,[["render",qe],["__scopeId","data-v-a464d466"]]);var et=Ze;const tt={class:"left-side"},nt={class:"color-text"},at={class:"color-num"},rt={class:"right-side"},ot={class:"color-slider"},it={ref:"sliderRail",class:"color-slider-rail"},st={ref:"sliderTrack",class:"color-slider-track"};function lt(e,t,n,r,o,i){return Object(a["J"])(),Object(a["j"])(a["e"],{name:"rotate"},{default:Object(a["eb"])(()=>[Object(a["fb"])(Object(a["m"])("div",{class:Object(a["z"])(["rgb-controller",{active:e.active}])},[Object(a["m"])("div",tt,[Object(a["m"])("span",nt,Object(a["V"])(e.title),1),Object(a["m"])("span",at,Object(a["V"])(e.modelValue),1)]),Object(a["m"])("div",rt,[Object(a["m"])("div",ot,[Object(a["m"])("div",it,null,512),Object(a["m"])("div",st,null,512),Object(a["m"])("div",{ref:"sliderBar",class:"color-slider-handle",onMousedown:t[0]||(t[0]=Object(a["gb"])((...t)=>e.onMouseDownHandler&&e.onMouseDownHandler(...t),["stop"]))},null,544)])])],2),[[a["bb"],e.show]])]),_:1})}var ct=Object(a["p"])({name:"RGBController",props:{min:{type:Number,default:0},max:{type:Number,default:255},title:{type:String,default:""},modelValue:{type:Number,default:0},show:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t}){const{proxy:n}=Object(a["r"])(),r=Object(a["N"])({active:!1}),o=Object(a["O"])(),i=Object(a["O"])(),s=Object(a["O"])(),l=n=>{if(!s.value||!o.value||!i.value)return;r.active=!0;const a=s.value.offsetWidth-o.value.offsetWidth,l=o.value.offsetLeft,c=n||window.event,u=c.clientX,_=n=>{const r=n||window.event,s=Math.floor(r.clientX-u);let c=l+s;c<0&&(c=0),c>=a&&(c=a),o.value&&(o.value.style.left=c+"px"),i.value&&(i.value.style.width=c+5+"px");const _=c/a,p=e.max-e.min,d=Math.floor(_*p+e.min);return t("update:modelValue",d),t("change",d),!1};return window.addEventListener("mousemove",_),window.addEventListener("mouseup",(function(){return r.active=!1,window.removeEventListener("mousemove",_),!1})),!1};function c(){if(o.value&&i.value&&s.value){const t=s.value.offsetWidth-o.value.offsetWidth,n=e.max-e.min,a=Math.floor(e.modelValue/n*t);o.value.style.left=a+"px",i.value.style.width=a+5+"px"}}return Object(a["G"])(()=>{c()}),{sliderBar:o,sliderTrack:i,sliderRail:s,onMouseDownHandler:l,...Object(a["Y"])(r)}}});n("1daa");const ut=V()(ct,[["render",lt],["__scopeId","data-v-156182e8"]]);var _t=ut,pt=Object(a["p"])({components:{LightPanel:et,RGBController:_t},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){Object(a["O"])();const n=Object(a["N"])({popVisible:!1,selectedColor:"",inputValueR:0,inputValueG:0,inputValueB:0,customColor:"",customColorActive:!1,lightArray:Array(12).fill("#000000")}),r=Object(B["b"])(),o=Object(a["h"])(()=>r.state.blockly.popLightVisible),i=Object(a["h"])(()=>r.state.blockly.lightArray),s=e=>{n.customColorActive=!1,e!==n.selectedColor&&(n.selectedColor=e)},l=()=>{const e="#"+n.inputValueR.toString(16).padStart(2,"0")+n.inputValueG.toString(16).padStart(2,"0")+n.inputValueB.toString(16).padStart(2,"0");n.customColorActive=!0,n.customColor=e,n.selectedColor=e};function c(e){n.lightArray=[...e.slice(1),e[0],e[0],e[0],e[0]]}function u(){r.commit("blockly/togglePopLightVisible",!1)}function _(){he.emit("updateLightColor",null,[...n.lightArray]),r.commit("blockly/togglePopLightVisible",!1)}return Object(a["G"])(()=>{}),{...Object(a["Y"])(n),Colors:Ye,ColorEnum:we,changeColor:s,handleRGBChange:l,updateLightArray:c,initLightArray:i,handleConfirm:_,handleCancel:u,popLightVisible:o}}});n("4d79");const dt=V()(pt,[["render",xe],["__scopeId","data-v-3e8bcdc3"]]);var Ot=dt,Tt=Object(a["p"])({components:{LightColor:Ot},props:{},setup(e,{emit:t}){const n=Object(a["N"])({popVisible:!1});return Object(a["G"])(()=>{}),{...Object(a["Y"])(n)}}});const Et=V()(Tt,[["render",De]]);var mt=Et;const bt={style:{"text-align":"center","margin-bottom":"18px"}},At=["onClick"],ht=["onClick"],Rt=["onClick"],It=["onClick"];function vt(e,t,n,r,o,i){const s=Object(a["S"])("a-button"),l=Object(a["S"])("a-row"),c=Object(a["S"])("a-input"),u=Object(a["S"])("a-radio"),_=Object(a["S"])("a-card"),p=Object(a["S"])("a-list-item-meta"),d=Object(a["S"])("a-list-item"),O=Object(a["S"])("a-list"),T=Object(a["S"])("a-tab-pane"),E=Object(a["S"])("a-tabs"),m=Object(a["S"])("a-drawer");return Object(a["J"])(),Object(a["j"])(m,{visible:e.popVisible,"onUpdate:visible":t[4]||(t[4]=t=>e.popVisible=t),class:"variable-drawer","wrap-style":{position:"absolute"},keyboard:!1,mask:!1,"get-container":e.getContainer,placement:"right",onClose:e.handleClose},{default:Object(a["eb"])(()=>[Object(a["m"])("h3",bt,Object(a["V"])(e.$t("VARIABLE_DRAWER.VARIABLE_MGR")),1),Object(a["m"])("div",null,[Object(a["o"])(l,{justify:"space-between"},{default:Object(a["eb"])(()=>[Object(a["o"])(s,{type:"primary",ghost:"",shape:"round",onClick:t[0]||(t[0]=t=>e.changeCreateKey(e.tabs.variable.key))},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t("VARIABLE_DRAWER.CREATE_NEW_VARIABLE")),1)]),_:1}),Object(a["o"])(s,{type:"primary",ghost:"",shape:"round",onClick:t[1]||(t[1]=t=>e.changeCreateKey(e.tabs.list.key))},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t("VARIABLE_DRAWER.CREATE_NEW_LIST")),1)]),_:1})]),_:1}),e.createKey?(Object(a["J"])(),Object(a["j"])(_,{key:0,style:{"margin-bottom":"12px","margin-top":"12px","border-color":"#1890ff","border-radius":"32px"}},{default:Object(a["eb"])(()=>[Object(a["o"])(l,{style:{"padding-bottom":"12px"}},{default:Object(a["eb"])(()=>[Object(a["o"])(c,{ref:"refInput",value:e.createValue,"onUpdate:value":t[2]||(t[2]=t=>e.createValue=t),placeholder:e.tabs[e.createKey].placeholder},null,8,["value","placeholder"])]),_:1}),Object(a["o"])(l,{style:{"padding-bottom":"12px"}},{default:Object(a["eb"])(()=>[Object(a["o"])(u,{checked:""},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.tabs[e.createKey].context),1)]),_:1})]),_:1}),Object(a["o"])(l,{justify:"space-around"},{default:Object(a["eb"])(()=>[Object(a["o"])(s,{type:"text",onClick:e.createCancel},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t("VARIABLE_DRAWER.CREATE_CANCEL")),1)]),_:1},8,["onClick"]),Object(a["o"])(s,{type:"link",onClick:e.createConfirm},{default:Object(a["eb"])(()=>[Object(a["n"])(Object(a["V"])(e.$t("VARIABLE_DRAWER.CREATE_CONFIRM")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):Object(a["k"])("",!0)]),Object(a["o"])(E,{activeKey:e.activeTabKey,"onUpdate:activeKey":t[3]||(t[3]=t=>e.activeTabKey=t),onChange:e.getVariables},{renderTabBar:Object(a["eb"])(({DefaultTabBar:e,...t})=>[(Object(a["J"])(),Object(a["j"])(Object(a["T"])(e),Object(a["x"])(t,{style:{textAlign:"center"}}),null,16))]),default:Object(a["eb"])(()=>[(Object(a["J"])(),Object(a["j"])(T,{key:e.tabs.variable.key,tab:e.tabs.variable.context},{default:Object(a["eb"])(()=>[Object(a["o"])(O,{"data-source":e.variables},{renderItem:Object(a["eb"])(({item:t})=>[(Object(a["J"])(),Object(a["j"])(d,{key:""+t.id_},{actions:Object(a["eb"])(()=>[Object(a["m"])("a",{onClick:n=>e.renameVariable(t)},Object(a["V"])(e.$t("VARIABLE_DRAWER.RENAME")),9,At),Object(a["m"])("a",{onClick:n=>e.deleteVariableById(t.id_)},Object(a["V"])(e.$t("VARIABLE_DRAWER.DELETE")),9,ht)]),default:Object(a["eb"])(()=>[Object(a["o"])(p,{style:{"white-space":"nowrap"},description:t.name},null,8,["description"])]),_:2},1024))]),_:1},8,["data-source"])]),_:1},8,["tab"])),(Object(a["J"])(),Object(a["j"])(T,{key:e.tabs.list.key,tab:e.tabs.list.context},{default:Object(a["eb"])(()=>[Object(a["o"])(O,{"data-source":e.list,locale:{emptyText:" "}},{renderItem:Object(a["eb"])(({item:t})=>[(Object(a["J"])(),Object(a["j"])(d,{key:""+t.id_},{actions:Object(a["eb"])(()=>[Object(a["m"])("a",{onClick:n=>e.renameVariable(t)},Object(a["V"])(e.$t("VARIABLE_DRAWER.RENAME")),9,Rt),Object(a["m"])("a",{onClick:n=>e.deleteVariableById(t.id_)},Object(a["V"])(e.$t("VARIABLE_DRAWER.DELETE")),9,It)]),default:Object(a["eb"])(()=>[Object(a["o"])(p,{style:{"white-space":"nowrap"},description:t.name},null,8,["description"])]),_:2},1024))]),_:1},8,["data-source"])]),_:1},8,["tab"]))]),_:1},8,["activeKey","onChange"])]),_:1},8,["visible","get-container","onClose"])}var gt=n("f64c"),Nt=n("47e2"),St=Object(a["p"])({name:"VariableDrawer",props:{variableDrawerVisible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=Object(a["O"])(null),{t:r}=Object(Nt["b"])(),o={variable:{key:"variable",context:r("VARIABLE_DRAWER.VARIABLE"),placeholder:r("VARIABLE_DRAWER.VARIABLE_INPUT"),variableType:"VAR"},list:{key:"list",context:r("VARIABLE_DRAWER.LIST"),placeholder:r("VARIABLE_DRAWER.LIST_INPUT"),variableType:"LIST"}},i=Object(a["N"])({activeTabKey:o.variable.key,createKey:"",createValue:"",variables:[],list:[],popVisible:!1});Object(a["cb"])(()=>e.variableDrawerVisible,()=>{e.variableDrawerVisible&&(i.popVisible=!0)});const s=()=>{t("close")},l=()=>{i.createKey="",i.createValue=""},c=()=>{const{createKey:e,createValue:t,activeTabKey:n}=i;if(!t)return;const r=J["getMainWorkspace"](),s=e===o.variable.key?o.variable.variableType:o.list.variableType,l=J["Variables"].nameUsedWithAnyType(t,r);if(l){let e;l.type===s?e=J["Msg"].VARIABLE_ALREADY_EXISTS.replace("%1",l.name):(e=J["Msg"].VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,e=e.replace("%1",l.name).replace("%2",l.type)),gt["a"].error(e)}else r.createVariable(t,s),Object(a["y"])(()=>{u(),n!==e&&(i.activeTabKey=e),i.createKey="",i.createValue=""})},u=()=>{const e=J["getMainWorkspace"]();i.variables=[...e.getVariablesOfType(o.variable.variableType)],i.list=[...e.getVariablesOfType(o.list.variableType)]},_=e=>{const t=J["getMainWorkspace"]();J["Variables"].renameVariable(t,e,()=>{Object(a["y"])(()=>{u()})})},p=e=>{const t=J["getMainWorkspace"]();t.deleteVariableById(e),Object(a["y"])(()=>{u()})},d=e=>{i.createValue="",i.createKey=e,i.activeTabKey!==i.createKey&&(i.activeTabKey=i.createKey),Object(a["y"])(()=>{var e;null===(e=n.value)||void 0===e||e.focus()})},O=()=>{const e=document.querySelector(".block-box");return e||document.body};return{...Object(a["Y"])(i),refInput:n,tabs:o,getContainer:O,createCancel:l,createConfirm:c,getVariables:u,changeCreateKey:d,deleteVariableById:p,renameVariable:_,handleClose:s}},mounted(){Object(a["y"])(()=>{this.getVariables()})}});n("adb6");const ft=V()(St,[["render",vt]]);var Lt=ft;n("788f"),n("e3c9");const jt=window.Interpreter;var $t=Object(a["p"])({name:"BleUsage",components:{HeaderNav:Ge["a"],VariableDrawer:Lt,BlocklyModal:mt,InfoCircleOutlined:M["a"],GameRule:w},setup(){const{proxy:e}=Object(a["r"])();let t=Object(a["w"])({});const n=["window","self","print","getDateNow","sleepFn","blePlayMusic","bleSetLight","clearAllLight","bleSetLightAnimation","value","JOYO_identify","setUp"],r=Object(a["N"])({lang:Me["b"].getLocale(),workspace:null,recoverFlag:!1,runStatus:!1,currentState:"local",visible:!1,gameVisible:!1,variableDrawerVisible:!1,infoList:[],varInfo:{},varInfoOrigin:{},debugInfo:[],sandBoxStepCount:0,sandBoxMaxStep:8e3,sandBoxMaxSetupTime:5e3,sandBoxMaxSetupBegin:0,lastOID:0,visibleOfGameRule:!1,ruleBook:{tokenList:"",gamePlay:""}});let o=null;const i=Object(y["d"])(),s=(Object(a["ab"])(),Object(B["b"])());Ie(s);const l=Object(a["h"])(()=>s.getters["ble/connectStatus"]);Object(a["cb"])(()=>l.value,e=>{T(e?"Joyo已连接":"断开连接！","system")});const c=()=>{C["a"].push({name:"Home"})};function u(){l.value?s.dispatch("ble/bleDisconnect"):s.dispatch("ble/bleConnect")}const _=()=>{o.clear(),J["serialization"].workspaces.load(JSON.parse(me["a"].pureCanvas),o)},p=()=>{r.variableDrawerVisible=!r.variableDrawerVisible},d=e=>{r.ruleBook=e,O()},O=()=>{var e;const t=J["serialization"].workspaces.save(o);t.ruleBook=r.ruleBook;const n=(null===(e=i.query)||void 0===e?void 0:e.uuid)||"temp";s.dispatch("updateProject",{uuid:n,content:JSON.stringify(t)}),alert("save success")};function T(e,t="info"){r.debugInfo.push({color:"info"===t?"green":"error"===t?"red":"blue",msg:`[${t}]: ${e}`})}const E=()=>{q["javascriptGenerator"].workspaceToCode(o)},m=e=>e>=301&&e<=314?e-300:e,b=()=>{r.sandBoxStepCount=0,r.sandBoxMaxSetupBegin=0,X(),Object(Y["f"])(),t=null,r.runStatus=!1};function A(e,t){const n=e=>{var t=(new Date).getTime();while((new Date).getTime()<t+1e3*e);},a=e=>Object(Y["c"])(JSON.parse(e)),r=(e,t,n)=>{t&&W(e,t,n)},o=()=>(X(),Object(Y["f"])());var i=function(){return T(Array.prototype.slice.call(arguments).join(),"log"),console.log(...arguments)},s=function(){return Date.now()};e.setProperty(t,"print",e.createNativeFunction(i)),e.setProperty(t,"getDateNow",e.createNativeFunction(s)),e.setProperty(t,"sleepFn",e.createNativeFunction(n)),e.setProperty(t,"blePlayMusic",e.createNativeFunction(Y["b"])),e.setProperty(t,"bleSetLight",e.createNativeFunction(a)),e.setProperty(t,"clearAllLight",e.createNativeFunction(o)),e.setProperty(t,"bleSetLightAnimation",e.createNativeFunction(r))}function h(e,t){return e.filter(e=>-1===n.indexOf(e)&&("object"!==typeof t[e]||t[e]&&"Array"===t[e].class))}function R(){const e=t.globalObject.properties,n=h(Object.keys(e),e);for(let t=0;t<n.length;t++){const o=n[t];var a;if("object"===typeof e[o])r.varInfo[o]=Object.values(null===(a=e[o])||void 0===a?void 0:a.properties);else r.varInfo[o]=e[o]}}function I(e){var n;r.sandBoxStepCount=0,t&&null!==(n=t)&&void 0!==n&&n.appendCode&&(t.appendCode(`JOYO_identify(${e})`),t.run(),R())}function v(){try{var e;null!==(e=t)&&void 0!==e&&e.step()?(r.sandBoxStepCount++,r.sandBoxStepCount<r.sandBoxMaxStep?window.setTimeout(v,0):(b(),T("未终结的循环，超过最大可执行数","error"))):R()}catch(n){T(n.toString()),console.log(n)}}const g=async()=>{if(r.runStatus)b();else if(r.varInfo={},r.debugInfo=[],l.value||T("JOYO未连接","system"),o){let n=q["javascriptGenerator"].workspaceToCode(o);const a=n.split("\n\n"),i=a.filter(e=>{const t=e.replace(/\n/g,"");return 0===t.indexOf("function")||0===t.indexOf("// ")||0===t.indexOf("var ")});n=i.join("\n");try{t=new jt(n,A),v(),r.runStatus=!0}catch(e){T(e.toString(),"error"),console.log(e)}}};function N(e=""){const t=localStorage.getItem("block-"+e)||me["a"].runSample;try{const e=JSON.parse(t);e.ruleBook&&(r.ruleBook=JSON.parse(JSON.stringify(e.ruleBook))),J["serialization"].workspaces.load(e,o)}catch(n){console.log(n)}}function S(){const e=J["serialization"].workspaces.save(o);J["serialization"].workspaces.load(e,o),r.lang=Me["b"].getLocale()}function f(){try{const e=new Z;e.init({contextMenu:!0,shortcut:!0}),J["ContextMenuRegistry"].registry.unregister("blockDuplicate")}catch(e){console.log(e)}}return Object(y["c"])((e,t)=>{var n;const a=null===(n=i.query)||void 0===n?void 0:n.uuid;try{const e=J["serialization"].workspaces.save(o);if(e.ruleBook=r.ruleBook,a){const t=localStorage.getItem("block-"+a);if(t!==JSON.stringify(e))return!!window.confirm("当前程序未保存，确认离开？")}}catch(s){console.log(s)}return!0}),Object(a["H"])(()=>{}),Object(a["G"])(()=>{var e;function n(e){if(e.type===J["Events"].BLOCK_CHANGE){const t=o.getBlockById(e.blockId);"play_audio"===t.type&&Ce(e)}}J["zelos"].ConstantProvider.prototype.FIELD_COLOUR_FULL_BLOCK=!1,o=J["inject"]("blocklyDiv",{grid:{spacing:20,length:3,colour:"#ccc",snap:!0},maxInstances:{setUp:1},toolbox:Ee,renderer:"zelos"}),ae(o),Me["b"].setLocale(Me["b"].getLocale()),f(),o.addChangeListener(n),q["javascriptGenerator"].addReservedWords("code"),Me["b"].$on("change",S),window.blockly=J,window.workspace=o,window.javascriptGenerator=q["javascriptGenerator"],N(null===(e=i.query)||void 0===e?void 0:e.uuid),s.dispatch("getProject"),window.handleNotifyEvent=e=>{if(11===e.length&&5===e[2]&&177===e[3]&&4===e[4]){const n=m(256*e[10]*256*256+256*e[9]*256+256*e[8]+e[7]);r.lastOID=n,t&&t.appendCode?I(n):r.runStatus}}}),{connectStatus:l,...Object(a["Y"])(r),runCode:g,generateCode:E,saveCode:O,clearCanvas:_,connectJoyo:u,navigatorBack:c,toggleVariableDrawerVisible:p,LANG:U["a"],updateRuleBook:d}}});n("8b1a");const Ct=V()($t,[["render",$],["__scopeId","data-v-cac31ae4"]]);t["default"]=Ct},b79d:function(e,t,n){},b86c:function(e,t,n){"use strict";n("21da")},c330:function(e,t,n){"use strict";var a=n("7a23");const r={class:"header-nav"};function o(e,t,n,o,i,s){const l=Object(a["S"])("a-page-header");return Object(a["J"])(),Object(a["l"])("div",r,[Object(a["o"])(l,{style:{border:"1px solid rgb(235, 237, 240)",height:"100%"},title:e.title,"sub-title":e.subTitle,onBack:e.onBack},{extra:Object(a["eb"])(()=>[Object(a["R"])(e.$slots,"default",{},void 0,!0)]),_:3},8,["title","sub-title","onBack"])])}var i=Object(a["p"])({name:"HeaderNav",props:{title:{type:String,default:""},subTitle:{type:String,default:""}},emits:["update:visible"],setup(){const e=Object(a["ab"])();let t=null;return e.onBack&&(t=e.onBack),{onBack:t}}}),s=(n("5324"),n("6b0d")),l=n.n(s);const c=l()(i,[["render",o],["__scopeId","data-v-1a51b964"]]);t["a"]=c},ce20:function(e,t,n){"use strict";n("d52c")},d52c:function(e,t,n){},e216:function(e,t,n){},e2e2:function(e,t,n){"use strict";n("9cdf")},e3c9:function(e,t,n){},e5d4:function(e,t,n){var a,r,o;(function(i,s){r=[n("e98f")],a=s,o="function"===typeof a?a.apply(t,r):a,void 0===o||(e.exports=o)})(0,(function(e){var t=e.__namespace__,n={};t.module$build$src$core$variables,t.module$build$src$core$utils$string,t.CodeGenerator$$module$build$src$core$generator,t.module$build$src$core$input_types.inputTypes,t.module$build$src$core$names.Names,t.NameType$$module$build$src$core$names;n.javascriptGenerator=new t.CodeGenerator$$module$build$src$core$generator("JavaScript"),n.javascriptGenerator.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(",")),n.javascriptGenerator.ORDER_ATOMIC=0,n.javascriptGenerator.ORDER_NEW=1.1,n.javascriptGenerator.ORDER_MEMBER=1.2,n.javascriptGenerator.ORDER_FUNCTION_CALL=2,n.javascriptGenerator.ORDER_INCREMENT=3,n.javascriptGenerator.ORDER_DECREMENT=3,n.javascriptGenerator.ORDER_BITWISE_NOT=4.1,n.javascriptGenerator.ORDER_UNARY_PLUS=4.2,n.javascriptGenerator.ORDER_UNARY_NEGATION=4.3,n.javascriptGenerator.ORDER_LOGICAL_NOT=4.4,n.javascriptGenerator.ORDER_TYPEOF=4.5,n.javascriptGenerator.ORDER_VOID=4.6,n.javascriptGenerator.ORDER_DELETE=4.7,n.javascriptGenerator.ORDER_AWAIT=4.8,n.javascriptGenerator.ORDER_EXPONENTIATION=5,n.javascriptGenerator.ORDER_MULTIPLICATION=5.1,n.javascriptGenerator.ORDER_DIVISION=5.2,n.javascriptGenerator.ORDER_MODULUS=5.3,n.javascriptGenerator.ORDER_SUBTRACTION=6.1,n.javascriptGenerator.ORDER_ADDITION=6.2,n.javascriptGenerator.ORDER_BITWISE_SHIFT=7,n.javascriptGenerator.ORDER_RELATIONAL=8,n.javascriptGenerator.ORDER_IN=8,n.javascriptGenerator.ORDER_INSTANCEOF=8,n.javascriptGenerator.ORDER_EQUALITY=9,n.javascriptGenerator.ORDER_BITWISE_AND=10,n.javascriptGenerator.ORDER_BITWISE_XOR=11,n.javascriptGenerator.ORDER_BITWISE_OR=12,n.javascriptGenerator.ORDER_LOGICAL_AND=13,n.javascriptGenerator.ORDER_LOGICAL_OR=14,n.javascriptGenerator.ORDER_CONDITIONAL=15,n.javascriptGenerator.ORDER_ASSIGNMENT=16,n.javascriptGenerator.ORDER_YIELD=17,n.javascriptGenerator.ORDER_COMMA=18,n.javascriptGenerator.ORDER_NONE=99,n.javascriptGenerator.ORDER_OVERRIDES=[[n.javascriptGenerator.ORDER_FUNCTION_CALL,n.javascriptGenerator.ORDER_MEMBER],[n.javascriptGenerator.ORDER_FUNCTION_CALL,n.javascriptGenerator.ORDER_FUNCTION_CALL],[n.javascriptGenerator.ORDER_MEMBER,n.javascriptGenerator.ORDER_MEMBER],[n.javascriptGenerator.ORDER_MEMBER,n.javascriptGenerator.ORDER_FUNCTION_CALL],[n.javascriptGenerator.ORDER_LOGICAL_NOT,n.javascriptGenerator.ORDER_LOGICAL_NOT],[n.javascriptGenerator.ORDER_MULTIPLICATION,n.javascriptGenerator.ORDER_MULTIPLICATION],[n.javascriptGenerator.ORDER_ADDITION,n.javascriptGenerator.ORDER_ADDITION],[n.javascriptGenerator.ORDER_LOGICAL_AND,n.javascriptGenerator.ORDER_LOGICAL_AND],[n.javascriptGenerator.ORDER_LOGICAL_OR,n.javascriptGenerator.ORDER_LOGICAL_OR]],n.javascriptGenerator.isInitialized=!1,n.javascriptGenerator.init=function(e){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.module$build$src$core$names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);const n=[];var a=t.module$build$src$core$variables.allDeveloperVariables(e);for(let r=0;r<a.length;r++)n.push(this.nameDB_.getName(a[r],t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(e=t.module$build$src$core$variables.allUsedVarModels(e),a=0;a<e.length;a++)n.push(this.nameDB_.getName(e[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE));n.length&&(this.definitions_.variables="var "+n.join(", ")+";"),this.isInitialized=!0},n.javascriptGenerator.finish=function(e){const t=Object.values(this.definitions_);return e=Object.getPrototypeOf(this).finish.call(this,e),this.isInitialized=!1,this.nameDB_.reset(),t.join("\n\n")+"\n\n\n"+e},n.javascriptGenerator.scrubNakedValue=function(e){return e+";\n"},n.javascriptGenerator.quote_=function(e){return e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"),"'"+e+"'"},n.javascriptGenerator.multiline_quote_=function(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},n.javascriptGenerator.scrub_=function(e,n,a){let r="";if(!e.outputConnection||!e.outputConnection.targetConnection){var o=e.getCommentText();o&&(o=t.module$build$src$core$utils$string.wrap(o,this.COMMENT_WRAP-3),r+=this.prefixLines(o+"\n","// "));for(let n=0;n<e.inputList.length;n++)e.inputList[n].type===t.module$build$src$core$input_types.inputTypes.VALUE&&(o=e.inputList[n].connection.targetBlock())&&(o=this.allNestedComments(o))&&(r+=this.prefixLines(o,"// "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),a=a?"":this.blockToCode(e),r+n+a},n.javascriptGenerator.getAdjusted=function(e,n,a,r,o){a=a||0,o=o||this.ORDER_NONE,e.workspace.options.oneBasedIndex&&a--;const i=e.workspace.options.oneBasedIndex?"1":"0";let s,l=o;return 0<a?s=l=this.ORDER_ADDITION:0>a?s=l=this.ORDER_SUBTRACTION:r&&(s=l=this.ORDER_UNARY_NEGATION),e=this.valueToCode(e,n,l)||i,t.module$build$src$core$utils$string.isNumber(e)?(e=Number(e)+a,r&&(e=-e)):(0<a?e=e+" + "+a:0>a&&(e=e+" - "+-a),r&&(e=a?"-("+e+")":"-"+e),s=Math.floor(s),o=Math.floor(o),s&&o>=s&&(e="("+e+")")),e};t.NameType$$module$build$src$core$names;n.javascriptGenerator.variables_get=function(e){return[n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.variables_set=function(e){const a=n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0";return n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE)+" = "+a+";\n"};n.javascriptGenerator.variables_get_dynamic=n.javascriptGenerator.variables_get,n.javascriptGenerator.variables_set_dynamic=n.javascriptGenerator.variables_set;t.NameType$$module$build$src$core$names;var a=/^\s*'([^']|\\')*'\s*$/,r=function(e){return a.test(e)?[e,n.javascriptGenerator.ORDER_ATOMIC]:["String("+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},o=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n};n.javascriptGenerator.text=function(e){return[n.javascriptGenerator.quote_(e.getFieldValue("TEXT")),n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.text_multiline=function(e){e=n.javascriptGenerator.multiline_quote_(e.getFieldValue("TEXT"));const t=-1!==e.indexOf("+")?n.javascriptGenerator.ORDER_ADDITION:n.javascriptGenerator.ORDER_ATOMIC;return[e,t]},n.javascriptGenerator.text_join=function(e){switch(e.itemCount_){case 0:return["''",n.javascriptGenerator.ORDER_ATOMIC];case 1:return e=n.javascriptGenerator.valueToCode(e,"ADD0",n.javascriptGenerator.ORDER_NONE)||"''",r(e);case 2:var t=n.javascriptGenerator.valueToCode(e,"ADD0",n.javascriptGenerator.ORDER_NONE)||"''";return e=n.javascriptGenerator.valueToCode(e,"ADD1",n.javascriptGenerator.ORDER_NONE)||"''",[r(t)[0]+" + "+r(e)[0],n.javascriptGenerator.ORDER_ADDITION];default:t=Array(e.itemCount_);for(let a=0;a<e.itemCount_;a++)t[a]=n.javascriptGenerator.valueToCode(e,"ADD"+a,n.javascriptGenerator.ORDER_NONE)||"''";return["["+t.join(",")+"].join('')",n.javascriptGenerator.ORDER_FUNCTION_CALL]}},n.javascriptGenerator.text_append=function(e){const a=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);return e=n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''",a+" += "+r(e)[0]+";\n"},n.javascriptGenerator.text_length=function(e){return[(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"''")+".length",n.javascriptGenerator.ORDER_MEMBER]},n.javascriptGenerator.text_isEmpty=function(e){return["!"+(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"''")+".length",n.javascriptGenerator.ORDER_LOGICAL_NOT]},n.javascriptGenerator.text_indexOf=function(e){var t="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf";const a=n.javascriptGenerator.valueToCode(e,"FIND",n.javascriptGenerator.ORDER_NONE)||"''";return t=(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"''")+"."+t+"("+a+")",e.workspace.options.oneBasedIndex?[t+" + 1",n.javascriptGenerator.ORDER_ADDITION]:[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_charAt=function(e){const t=e.getFieldValue("WHERE")||"FROM_START",a=n.javascriptGenerator.valueToCode(e,"VALUE","RANDOM"===t?n.javascriptGenerator.ORDER_NONE:n.javascriptGenerator.ORDER_MEMBER)||"''";switch(t){case"FIRST":return[a+".charAt(0)",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"LAST":return[a+".slice(-1)",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_START":return e=n.javascriptGenerator.getAdjusted(e,"AT"),[a+".charAt("+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"FROM_END":return e=n.javascriptGenerator.getAdjusted(e,"AT",1,!0),[a+".slice("+e+").charAt(0)",n.javascriptGenerator.ORDER_FUNCTION_CALL];case"RANDOM":return[n.javascriptGenerator.provideFunction_("textRandomLetter",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(text) {\n  var x = Math.floor(Math.random() * text.length);\n  return text[x];\n}\n`)+"("+a+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},n.javascriptGenerator.text_getSubstring=function(e){var t=e.getFieldValue("WHERE1"),a=e.getFieldValue("WHERE2"),r="FROM_END"!==t&&"LAST"!==t&&"FROM_END"!==a&&"LAST"!==a,i=n.javascriptGenerator.valueToCode(e,"STRING",r?n.javascriptGenerator.ORDER_MEMBER:n.javascriptGenerator.ORDER_NONE)||"''";if("FIRST"===t&&"LAST"===a)return[i,n.javascriptGenerator.ORDER_NONE];if(i.match(/^'?\w+'?$/)||r){switch(t){case"FROM_START":t=n.javascriptGenerator.getAdjusted(e,"AT1");break;case"FROM_END":t=n.javascriptGenerator.getAdjusted(e,"AT1",1,!1,n.javascriptGenerator.ORDER_SUBTRACTION),t=i+".length - "+t;break;case"FIRST":t="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(a){case"FROM_START":a=n.javascriptGenerator.getAdjusted(e,"AT2",1);break;case"FROM_END":a=n.javascriptGenerator.getAdjusted(e,"AT2",0,!1,n.javascriptGenerator.ORDER_SUBTRACTION),a=i+".length - "+a;break;case"LAST":a=i+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}i=i+".slice("+t+", "+a+")"}else{r=n.javascriptGenerator.getAdjusted(e,"AT1"),e=n.javascriptGenerator.getAdjusted(e,"AT2");const s={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};i=n.javascriptGenerator.provideFunction_("subsequence"+s[t]+s[a],`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===t||"FROM_START"===t?", at1":""}${"FROM_END"===a||"FROM_START"===a?", at2":""}) {\n  var start = ${o("sequence",t,"at1")};\n  var end = ${o("sequence",a,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+i+("FROM_END"===t||"FROM_START"===t?", "+r:"")+("FROM_END"===a||"FROM_START"===a?", "+e:"")+")"}return[i,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_changeCase=function(e){const t={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=n.javascriptGenerator.valueToCode(e,"TEXT",t?n.javascriptGenerator.ORDER_MEMBER:n.javascriptGenerator.ORDER_NONE)||"''",[t?e+t:n.javascriptGenerator.provideFunction_("textToTitleCase",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(str) {\n  return str.replace(/\\S+/g,\n      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});\n}\n`)+"("+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_trim=function(e){const t={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_MEMBER)||"''")+t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_print=function(e){return"window.alert("+(n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''")+");\n"},n.javascriptGenerator.text_prompt_ext=function(e){let t="window.prompt("+(e.getField("TEXT")?n.javascriptGenerator.quote_(e.getFieldValue("TEXT")):n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''")+")";return"NUMBER"===e.getFieldValue("TYPE")&&(t="Number("+t+")"),[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_prompt=n.javascriptGenerator.text_prompt_ext,n.javascriptGenerator.text_count=function(e){const t=n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''";return e=n.javascriptGenerator.valueToCode(e,"SUB",n.javascriptGenerator.ORDER_NONE)||"''",[n.javascriptGenerator.provideFunction_("textCount",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {\n  if (needle.length === 0) {\n    return haystack.length + 1;\n  } else {\n    return haystack.split(needle).length - 1;\n  }\n}\n`)+"("+t+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_replace=function(e){const t=n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_NONE)||"''",a=n.javascriptGenerator.valueToCode(e,"FROM",n.javascriptGenerator.ORDER_NONE)||"''";return e=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_NONE)||"''",[n.javascriptGenerator.provideFunction_("textReplace",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {\n  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')\n                 .replace(/\\x08/g, '\\\\x08');\n  return haystack.replace(new RegExp(needle, 'g'), replacement);\n}\n`)+"("+t+", "+a+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.text_reverse=function(e){return[(n.javascriptGenerator.valueToCode(e,"TEXT",n.javascriptGenerator.ORDER_MEMBER)||"''")+".split('').reverse().join('')",n.javascriptGenerator.ORDER_FUNCTION_CALL]};t.NameType$$module$build$src$core$names;n.javascriptGenerator.procedures_defreturn=function(e){const a=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE);var r="";n.javascriptGenerator.STATEMENT_PREFIX&&(r+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,e)),n.javascriptGenerator.STATEMENT_SUFFIX&&(r+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e)),r&&(r=n.javascriptGenerator.prefixLines(r,n.javascriptGenerator.INDENT));let o="";n.javascriptGenerator.INFINITE_LOOP_TRAP&&(o=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.INFINITE_LOOP_TRAP,e),n.javascriptGenerator.INDENT));const i=n.javascriptGenerator.statementToCode(e,"STACK");let s=n.javascriptGenerator.valueToCode(e,"RETURN",n.javascriptGenerator.ORDER_NONE)||"",l="";i&&s&&(l=r),s&&(s=n.javascriptGenerator.INDENT+"return "+s+";\n");const c=[],u=e.getVars();for(let _=0;_<u.length;_++)c[_]=n.javascriptGenerator.nameDB_.getName(u[_],t.NameType$$module$build$src$core$names.VARIABLE);return r="function "+a+"("+c.join(", ")+") {\n"+r+o+i+l+s+"}",r=n.javascriptGenerator.scrub_(e,r),n.javascriptGenerator.definitions_["%"+a]=r,null},n.javascriptGenerator.procedures_defnoreturn=n.javascriptGenerator.procedures_defreturn,n.javascriptGenerator.procedures_callreturn=function(e){const a=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE),r=[],o=e.getVars();for(let t=0;t<o.length;t++)r[t]=n.javascriptGenerator.valueToCode(e,"ARG"+t,n.javascriptGenerator.ORDER_NONE)||"null";return[a+"("+r.join(", ")+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.procedures_callnoreturn=function(e){return n.javascriptGenerator.procedures_callreturn(e)[0]+";\n"},n.javascriptGenerator.procedures_ifreturn=function(e){let t="if ("+(n.javascriptGenerator.valueToCode(e,"CONDITION",n.javascriptGenerator.ORDER_NONE)||"false")+") {\n";return n.javascriptGenerator.STATEMENT_SUFFIX&&(t+=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e),n.javascriptGenerator.INDENT)),e.hasReturnValue_?(e=n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_NONE)||"null",t+=n.javascriptGenerator.INDENT+"return "+e+";\n"):t+=n.javascriptGenerator.INDENT+"return;\n",t+"}\n"};t.NameType$$module$build$src$core$names;n.javascriptGenerator.math_number=function(e){return e=Number(e.getFieldValue("NUM")),[e,0<=e?n.javascriptGenerator.ORDER_ATOMIC:n.javascriptGenerator.ORDER_UNARY_NEGATION]},n.javascriptGenerator.math_arithmetic=function(e){var t={ADD:[" + ",n.javascriptGenerator.ORDER_ADDITION],MINUS:[" - ",n.javascriptGenerator.ORDER_SUBTRACTION],MULTIPLY:[" * ",n.javascriptGenerator.ORDER_MULTIPLICATION],DIVIDE:[" / ",n.javascriptGenerator.ORDER_DIVISION],POWER:[null,n.javascriptGenerator.ORDER_NONE]}[e.getFieldValue("OP")];const a=t[0];t=t[1];const r=n.javascriptGenerator.valueToCode(e,"A",t)||"0";return e=n.javascriptGenerator.valueToCode(e,"B",t)||"0",a?[r+a+e,t]:["Math.pow("+r+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_single=function(e){const t=e.getFieldValue("OP");let a;if("NEG"===t)return e=n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_UNARY_NEGATION)||"0","-"===e[0]&&(e=" "+e),["-"+e,n.javascriptGenerator.ORDER_UNARY_NEGATION];switch(e="SIN"===t||"COS"===t||"TAN"===t?n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_DIVISION)||"0":n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_NONE)||"0",t){case"ABS":a="Math.abs("+e+")";break;case"ROOT":a="Math.sqrt("+e+")";break;case"LN":a="Math.log("+e+")";break;case"EXP":a="Math.exp("+e+")";break;case"POW10":a="Math.pow(10,"+e+")";break;case"ROUND":a="Math.round("+e+")";break;case"ROUNDUP":a="Math.ceil("+e+")";break;case"ROUNDDOWN":a="Math.floor("+e+")";break;case"SIN":a="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":a="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":a="Math.tan("+e+" / 180 * Math.PI)"}if(a)return[a,n.javascriptGenerator.ORDER_FUNCTION_CALL];switch(t){case"LOG10":a="Math.log("+e+") / Math.log(10)";break;case"ASIN":a="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":a="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":a="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+t)}return[a,n.javascriptGenerator.ORDER_DIVISION]},n.javascriptGenerator.math_constant=function(e){return{PI:["Math.PI",n.javascriptGenerator.ORDER_MEMBER],E:["Math.E",n.javascriptGenerator.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",n.javascriptGenerator.ORDER_DIVISION],SQRT2:["Math.SQRT2",n.javascriptGenerator.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",n.javascriptGenerator.ORDER_MEMBER],INFINITY:["Infinity",n.javascriptGenerator.ORDER_ATOMIC]}[e.getFieldValue("CONSTANT")]},n.javascriptGenerator.math_number_property=function(e){var t={EVEN:[" % 2 === 0",n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],ODD:[" % 2 === 1",n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],WHOLE:[" % 1 === 0",n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],POSITIVE:[" > 0",n.javascriptGenerator.ORDER_RELATIONAL,n.javascriptGenerator.ORDER_RELATIONAL],NEGATIVE:[" < 0",n.javascriptGenerator.ORDER_RELATIONAL,n.javascriptGenerator.ORDER_RELATIONAL],DIVISIBLE_BY:[null,n.javascriptGenerator.ORDER_MODULUS,n.javascriptGenerator.ORDER_EQUALITY],PRIME:[null,n.javascriptGenerator.ORDER_NONE,n.javascriptGenerator.ORDER_FUNCTION_CALL]};const a=e.getFieldValue("PROPERTY"),[r,o,i]=t[a];return t=n.javascriptGenerator.valueToCode(e,"NUMBER_TO_CHECK",o)||"0","PRIME"===a?e=n.javascriptGenerator.provideFunction_("mathIsPrime",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(n) {\n  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if (n == 2 || n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1, or not whole.\n  // And false if n is divisible by 2 or 3.\n  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {\n    if (n % (x - 1) === 0 || n % (x + 1) === 0) {\n      return false;\n    }\n  }\n  return true;\n}\n`)+"("+t+")":"DIVISIBLE_BY"===a?(e=n.javascriptGenerator.valueToCode(e,"DIVISOR",n.javascriptGenerator.ORDER_MODULUS)||"0",e=t+" % "+e+" === 0"):e=t+r,[e,i]},n.javascriptGenerator.math_change=function(e){const a=n.javascriptGenerator.valueToCode(e,"DELTA",n.javascriptGenerator.ORDER_ADDITION)||"0";return e=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),e+" = (typeof "+e+" === 'number' ? "+e+" : 0) + "+a+";\n"},n.javascriptGenerator.math_round=n.javascriptGenerator.math_single,n.javascriptGenerator.math_trig=n.javascriptGenerator.math_single,n.javascriptGenerator.math_on_list=function(e){var t=e.getFieldValue("OP");switch(t){case"SUM":e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_MEMBER)||"[]",e+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]",e="Math.min.apply(null, "+e+")";break;case"MAX":e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]",e="Math.max.apply(null, "+e+")";break;case"AVERAGE":t=n.javascriptGenerator.provideFunction_("mathMean",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;\n}\n`),e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]",e=t+"("+e+")";break;case"MEDIAN":t=n.javascriptGenerator.provideFunction_("mathMedian",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n  var localList = myList.filter(function (x) {return typeof x === 'number';});\n  if (!localList.length) return null;\n  localList.sort(function(a, b) {return b - a;});\n  if (localList.length % 2 === 0) {\n    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\n  } else {\n    return localList[(localList.length - 1) / 2];\n  }\n}\n`),e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]",e=t+"("+e+")";break;case"MODE":t=n.javascriptGenerator.provideFunction_("mathModes",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(values) {\n  var modes = [];\n  var counts = [];\n  var maxCount = 0;\n  for (var i = 0; i < values.length; i++) {\n    var value = values[i];\n    var found = false;\n    var thisCount;\n    for (var j = 0; j < counts.length; j++) {\n      if (counts[j][0] === value) {\n        thisCount = ++counts[j][1];\n        found = true;\n        break;\n      }\n    }\n    if (!found) {\n      counts.push([value, 1]);\n      thisCount = 1;\n    }\n    maxCount = Math.max(thisCount, maxCount);\n  }\n  for (var j = 0; j < counts.length; j++) {\n    if (counts[j][1] === maxCount) {\n        modes.push(counts[j][0]);\n    }\n  }\n  return modes;\n}\n`),e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]",e=t+"("+e+")";break;case"STD_DEV":t=n.javascriptGenerator.provideFunction_("mathStandardDeviation",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(numbers) {\n  var n = numbers.length;\n  if (!n) return null;\n  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;\n  var variance = 0;\n  for (var j = 0; j < n; j++) {\n    variance += Math.pow(numbers[j] - mean, 2);\n  }\n  variance = variance / n;\n  return Math.sqrt(variance);\n}\n`),e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]",e=t+"("+e+")";break;case"RANDOM":t=n.javascriptGenerator.provideFunction_("mathRandomList",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list) {\n  var x = Math.floor(Math.random() * list.length);\n  return list[x];\n}\n`),e=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_NONE)||"[]",e=t+"("+e+")";break;default:throw Error("Unknown operator: "+t)}return[e,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_modulo=function(e){const t=n.javascriptGenerator.valueToCode(e,"DIVIDEND",n.javascriptGenerator.ORDER_MODULUS)||"0";return e=n.javascriptGenerator.valueToCode(e,"DIVISOR",n.javascriptGenerator.ORDER_MODULUS)||"0",[t+" % "+e,n.javascriptGenerator.ORDER_MODULUS]},n.javascriptGenerator.math_constrain=function(e){const t=n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_NONE)||"0",a=n.javascriptGenerator.valueToCode(e,"LOW",n.javascriptGenerator.ORDER_NONE)||"0";return e=n.javascriptGenerator.valueToCode(e,"HIGH",n.javascriptGenerator.ORDER_NONE)||"Infinity",["Math.min(Math.max("+t+", "+a+"), "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_random_int=function(e){const t=n.javascriptGenerator.valueToCode(e,"FROM",n.javascriptGenerator.ORDER_NONE)||"0";return e=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_NONE)||"0",[n.javascriptGenerator.provideFunction_("mathRandomInt",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n  if (a > b) {\n    // Swap a and b to ensure a is smaller.\n    var c = a;\n    a = b;\n    b = c;\n  }\n  return Math.floor(Math.random() * (b - a + 1) + a);\n}\n`)+"("+t+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_random_float=function(e){return["Math.random()",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.math_atan2=function(e){const t=n.javascriptGenerator.valueToCode(e,"X",n.javascriptGenerator.ORDER_NONE)||"0";return["Math.atan2("+(n.javascriptGenerator.valueToCode(e,"Y",n.javascriptGenerator.ORDER_NONE)||"0")+", "+t+") / Math.PI * 180",n.javascriptGenerator.ORDER_DIVISION]};t.module$build$src$core$utils$string,t.NameType$$module$build$src$core$names;n.javascriptGenerator.controls_repeat_ext=function(e){let a;a=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):n.javascriptGenerator.valueToCode(e,"TIMES",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0";let r=n.javascriptGenerator.statementToCode(e,"DO");r=n.javascriptGenerator.addLoopTrap(r,e),e="";const o=n.javascriptGenerator.nameDB_.getDistinctName("count",t.NameType$$module$build$src$core$names.VARIABLE);let i=a;return a.match(/^\w+$/)||t.module$build$src$core$utils$string.isNumber(a)||(i=n.javascriptGenerator.nameDB_.getDistinctName("repeat_end",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+i+" = "+a+";\n"),e+"for (var "+o+" = 0; "+o+" < "+i+"; "+o+"++) {\n"+r+"}\n"},n.javascriptGenerator.controls_repeat=n.javascriptGenerator.controls_repeat_ext,n.javascriptGenerator.controls_whileUntil=function(e){const t="UNTIL"===e.getFieldValue("MODE");let a=n.javascriptGenerator.valueToCode(e,"BOOL",t?n.javascriptGenerator.ORDER_LOGICAL_NOT:n.javascriptGenerator.ORDER_NONE)||"false",r=n.javascriptGenerator.statementToCode(e,"DO");return r=n.javascriptGenerator.addLoopTrap(r,e),t&&(a="!"+a),"while ("+a+") {\n"+r+"}\n"},n.javascriptGenerator.controls_for=function(e){var a=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),r=n.javascriptGenerator.valueToCode(e,"FROM",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0",o=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_ASSIGNMENT)||"0";const i=n.javascriptGenerator.valueToCode(e,"BY",n.javascriptGenerator.ORDER_ASSIGNMENT)||"1";let s=n.javascriptGenerator.statementToCode(e,"DO");if(s=n.javascriptGenerator.addLoopTrap(s,e),t.module$build$src$core$utils$string.isNumber(r)&&t.module$build$src$core$utils$string.isNumber(o)&&t.module$build$src$core$utils$string.isNumber(i)){var l=Number(r)<=Number(o);e="for ("+a+" = "+r+"; "+a+(l?" <= ":" >= ")+o+"; "+a,a=Math.abs(Number(i)),e=1===a?e+(l?"++":"--"):e+(l?" += ":" -= ")+a,e+=") {\n"+s+"}\n"}else e="",l=r,r.match(/^\w+$/)||t.module$build$src$core$utils$string.isNumber(r)||(l=n.javascriptGenerator.nameDB_.getDistinctName(a+"_start",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+l+" = "+r+";\n"),r=o,o.match(/^\w+$/)||t.module$build$src$core$utils$string.isNumber(o)||(r=n.javascriptGenerator.nameDB_.getDistinctName(a+"_end",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+r+" = "+o+";\n"),o=n.javascriptGenerator.nameDB_.getDistinctName(a+"_inc",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+o+" = ",e=t.module$build$src$core$utils$string.isNumber(i)?e+(Math.abs(i)+";\n"):e+"Math.abs("+i+");\n",e+="if ("+l+" > "+r+") {\n",e+=n.javascriptGenerator.INDENT+o+" = -"+o+";\n",e=e+"}\nfor ("+a+" = "+l+"; "+o+" >= 0 ? "+a+" <= "+r+" : "+a+" >= "+r+"; "+a+" += "+o+") {\n"+s+"}\n";return e},n.javascriptGenerator.controls_forEach=function(e){const a=n.javascriptGenerator.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);var r=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_ASSIGNMENT)||"[]";let o=n.javascriptGenerator.statementToCode(e,"DO");o=n.javascriptGenerator.addLoopTrap(o,e),e="";let i=r;return r.match(/^\w+$/)||(i=n.javascriptGenerator.nameDB_.getDistinctName(a+"_list",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+i+" = "+r+";\n"),r=n.javascriptGenerator.nameDB_.getDistinctName(a+"_index",t.NameType$$module$build$src$core$names.VARIABLE),o=n.javascriptGenerator.INDENT+a+" = "+i+"["+r+"];\n"+o,e+"for (var "+r+" in "+i+") {\n"+o+"}\n"},n.javascriptGenerator.controls_flow_statements=function(e){let t="";if(n.javascriptGenerator.STATEMENT_PREFIX&&(t+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,e)),n.javascriptGenerator.STATEMENT_SUFFIX&&(t+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e)),n.javascriptGenerator.STATEMENT_PREFIX){const a=e.getSurroundLoop();a&&!a.suppressPrefixSuffix&&(t+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,a))}switch(e.getFieldValue("FLOW")){case"BREAK":return t+"break;\n";case"CONTINUE":return t+"continue;\n"}throw Error("Unknown flow statement.")};n.javascriptGenerator.controls_if=function(e){var t=0;let a="";n.javascriptGenerator.STATEMENT_PREFIX&&(a+=n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_PREFIX,e));do{const r=n.javascriptGenerator.valueToCode(e,"IF"+t,n.javascriptGenerator.ORDER_NONE)||"false";let o=n.javascriptGenerator.statementToCode(e,"DO"+t);n.javascriptGenerator.STATEMENT_SUFFIX&&(o=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e),n.javascriptGenerator.INDENT)+o),a+=(0<t?" else ":"")+"if ("+r+") {\n"+o+"}",t++}while(e.getInput("IF"+t));return(e.getInput("ELSE")||n.javascriptGenerator.STATEMENT_SUFFIX)&&(t=n.javascriptGenerator.statementToCode(e,"ELSE"),n.javascriptGenerator.STATEMENT_SUFFIX&&(t=n.javascriptGenerator.prefixLines(n.javascriptGenerator.injectId(n.javascriptGenerator.STATEMENT_SUFFIX,e),n.javascriptGenerator.INDENT)+t),a+=" else {\n"+t+"}"),a+"\n"},n.javascriptGenerator.controls_ifelse=n.javascriptGenerator.controls_if,n.javascriptGenerator.logic_compare=function(e){const t={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],a="=="===t||"!="===t?n.javascriptGenerator.ORDER_EQUALITY:n.javascriptGenerator.ORDER_RELATIONAL,r=n.javascriptGenerator.valueToCode(e,"A",a)||"0";return e=n.javascriptGenerator.valueToCode(e,"B",a)||"0",[r+" "+t+" "+e,a]},n.javascriptGenerator.logic_operation=function(e){const t="AND"===e.getFieldValue("OP")?"&&":"||",a="&&"===t?n.javascriptGenerator.ORDER_LOGICAL_AND:n.javascriptGenerator.ORDER_LOGICAL_OR;let r=n.javascriptGenerator.valueToCode(e,"A",a);if(e=n.javascriptGenerator.valueToCode(e,"B",a),r||e){const n="&&"===t?"true":"false";r||(r=n),e||(e=n)}else e=r="false";return[r+" "+t+" "+e,a]},n.javascriptGenerator.logic_negate=function(e){const t=n.javascriptGenerator.ORDER_LOGICAL_NOT;return["!"+(n.javascriptGenerator.valueToCode(e,"BOOL",t)||"true"),t]},n.javascriptGenerator.logic_boolean=function(e){return["TRUE"===e.getFieldValue("BOOL")?"true":"false",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.logic_null=function(e){return["null",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.logic_ternary=function(e){const t=n.javascriptGenerator.valueToCode(e,"IF",n.javascriptGenerator.ORDER_CONDITIONAL)||"false",a=n.javascriptGenerator.valueToCode(e,"THEN",n.javascriptGenerator.ORDER_CONDITIONAL)||"null";return e=n.javascriptGenerator.valueToCode(e,"ELSE",n.javascriptGenerator.ORDER_CONDITIONAL)||"null",[t+" ? "+a+" : "+e,n.javascriptGenerator.ORDER_CONDITIONAL]};t.NameType$$module$build$src$core$names;n.javascriptGenerator.lists_create_empty=function(e){return["[]",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.lists_create_with=function(e){const t=Array(e.itemCount_);for(let a=0;a<e.itemCount_;a++)t[a]=n.javascriptGenerator.valueToCode(e,"ADD"+a,n.javascriptGenerator.ORDER_NONE)||"null";return["["+t.join(", ")+"]",n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.lists_repeat=function(e){const t=n.javascriptGenerator.provideFunction_("listsRepeat",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n  var array = [];\n  for (var i = 0; i < n; i++) {\n    array[i] = value;\n  }\n  return array;\n}\n`),a=n.javascriptGenerator.valueToCode(e,"ITEM",n.javascriptGenerator.ORDER_NONE)||"null";return e=n.javascriptGenerator.valueToCode(e,"NUM",n.javascriptGenerator.ORDER_NONE)||"0",[t+"("+a+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_length=function(e){return[(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",n.javascriptGenerator.ORDER_MEMBER]},n.javascriptGenerator.lists_isEmpty=function(e){return["!"+(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"[]")+".length",n.javascriptGenerator.ORDER_LOGICAL_NOT]},n.javascriptGenerator.lists_indexOf=function(e){var t="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf";const a=n.javascriptGenerator.valueToCode(e,"FIND",n.javascriptGenerator.ORDER_NONE)||"''";return t=(n.javascriptGenerator.valueToCode(e,"VALUE",n.javascriptGenerator.ORDER_MEMBER)||"[]")+"."+t+"("+a+")",e.workspace.options.oneBasedIndex?[t+" + 1",n.javascriptGenerator.ORDER_ADDITION]:[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_getIndex=function(e){const t=e.getFieldValue("MODE")||"GET",a=e.getFieldValue("WHERE")||"FROM_START";var r=n.javascriptGenerator.valueToCode(e,"VALUE","RANDOM"===a?n.javascriptGenerator.ORDER_NONE:n.javascriptGenerator.ORDER_MEMBER)||"[]";switch(a){case"FIRST":if("GET"===t)return[r+"[0]",n.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[r+".shift()",n.javascriptGenerator.ORDER_MEMBER];if("REMOVE"===t)return r+".shift();\n";break;case"LAST":if("GET"===t)return[r+".slice(-1)[0]",n.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[r+".pop()",n.javascriptGenerator.ORDER_MEMBER];if("REMOVE"===t)return r+".pop();\n";break;case"FROM_START":if(e=n.javascriptGenerator.getAdjusted(e,"AT"),"GET"===t)return[r+"["+e+"]",n.javascriptGenerator.ORDER_MEMBER];if("GET_REMOVE"===t)return[r+".splice("+e+", 1)[0]",n.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return r+".splice("+e+", 1);\n";break;case"FROM_END":if(e=n.javascriptGenerator.getAdjusted(e,"AT",1,!0),"GET"===t)return[r+".slice("+e+")[0]",n.javascriptGenerator.ORDER_FUNCTION_CALL];if("GET_REMOVE"===t)return[r+".splice("+e+", 1)[0]",n.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return r+".splice("+e+", 1);";break;case"RANDOM":if(r=n.javascriptGenerator.provideFunction_("listsGetRandomItem",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n  var x = Math.floor(Math.random() * list.length);\n  if (remove) {\n    return list.splice(x, 1)[0];\n  } else {\n    return list[x];\n  }\n}\n`)+"("+r+", "+("GET"!==t)+")","GET"===t||"GET_REMOVE"===t)return[r,n.javascriptGenerator.ORDER_FUNCTION_CALL];if("REMOVE"===t)return r+";\n"}throw Error("Unhandled combination (lists_getIndex).")},n.javascriptGenerator.lists_setIndex=function(e){function a(){if(r.match(/^\w+$/))return"";const e=n.javascriptGenerator.nameDB_.getDistinctName("tmpList",t.NameType$$module$build$src$core$names.VARIABLE),a="var "+e+" = "+r+";\n";return r=e,a}let r=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_MEMBER)||"[]";const o=e.getFieldValue("MODE")||"GET";var i=e.getFieldValue("WHERE")||"FROM_START";const s=n.javascriptGenerator.valueToCode(e,"TO",n.javascriptGenerator.ORDER_ASSIGNMENT)||"null";switch(i){case"FIRST":if("SET"===o)return r+"[0] = "+s+";\n";if("INSERT"===o)return r+".unshift("+s+");\n";break;case"LAST":if("SET"===o)return a()+(r+"[")+r+".length - 1] = "+s+";\n";if("INSERT"===o)return r+".push("+s+");\n";break;case"FROM_START":if(e=n.javascriptGenerator.getAdjusted(e,"AT"),"SET"===o)return r+"["+e+"] = "+s+";\n";if("INSERT"===o)return r+".splice("+e+", 0, "+s+");\n";break;case"FROM_END":if(e=n.javascriptGenerator.getAdjusted(e,"AT",1,!1,n.javascriptGenerator.ORDER_SUBTRACTION),i=a(),"SET"===o)return i+(r+"[")+r+".length - "+e+"] = "+s+";\n";if("INSERT"===o)return i+(r+".splice(")+r+".length - "+e+", 0, "+s+");\n";break;case"RANDOM":if(e=a(),i=n.javascriptGenerator.nameDB_.getDistinctName("tmpX",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+i+" = Math.floor(Math.random() * "+r+".length);\n","SET"===o)return e+(r+"[")+i+"] = "+s+";\n";if("INSERT"===o)return e+(r+".splice(")+i+", 0, "+s+");\n"}throw Error("Unhandled combination (lists_setIndex).")};var i=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+n:"LAST"===t?e+".length - 1":n};n.javascriptGenerator.lists_getSublist=function(e){var t=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_MEMBER)||"[]",a=e.getFieldValue("WHERE1"),r=e.getFieldValue("WHERE2");if("FIRST"===a&&"LAST"===r)t+=".slice(0)";else if(t.match(/^\w+$/)||"FROM_END"!==a&&"FROM_START"===r){switch(a){case"FROM_START":a=n.javascriptGenerator.getAdjusted(e,"AT1");break;case"FROM_END":a=n.javascriptGenerator.getAdjusted(e,"AT1",1,!1,n.javascriptGenerator.ORDER_SUBTRACTION),a=t+".length - "+a;break;case"FIRST":a="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(r){case"FROM_START":r=n.javascriptGenerator.getAdjusted(e,"AT2",1);break;case"FROM_END":r=n.javascriptGenerator.getAdjusted(e,"AT2",0,!1,n.javascriptGenerator.ORDER_SUBTRACTION),r=t+".length - "+r;break;case"LAST":r=t+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}t=t+".slice("+a+", "+r+")"}else{const o=n.javascriptGenerator.getAdjusted(e,"AT1");e=n.javascriptGenerator.getAdjusted(e,"AT2");const s={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};t=n.javascriptGenerator.provideFunction_("subsequence"+s[a]+s[r],`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===a||"FROM_START"===a?", at1":""}${"FROM_END"===r||"FROM_START"===r?", at2":""}) {\n  var start = ${i("sequence",a,"at1")};\n  var end = ${i("sequence",r,"at2")} + 1;\n  return sequence.slice(start, end);\n}\n`)+"("+t+("FROM_END"===a||"FROM_START"===a?", "+o:"")+("FROM_END"===r||"FROM_START"===r?", "+e:"")+")"}return[t,n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_sort=function(e){const t=n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]",a="1"===e.getFieldValue("DIRECTION")?1:-1;e=e.getFieldValue("TYPE");const r=n.javascriptGenerator.provideFunction_("listsGetSortCompare",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n  var compareFuncs = {\n    'NUMERIC': function(a, b) {\n        return Number(a) - Number(b); },\n    'TEXT': function(a, b) {\n        return a.toString() > b.toString() ? 1 : -1; },\n    'IGNORE_CASE': function(a, b) {\n        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },\n  };\n  var compare = compareFuncs[type];\n  return function(a, b) { return compare(a, b) * direction; };\n}\n      `);return[t+".slice().sort("+r+'("'+e+'", '+a+"))",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_split=function(e){let t=n.javascriptGenerator.valueToCode(e,"INPUT",n.javascriptGenerator.ORDER_MEMBER);const a=n.javascriptGenerator.valueToCode(e,"DELIM",n.javascriptGenerator.ORDER_NONE)||"''";if(e=e.getFieldValue("MODE"),"SPLIT"===e)t||(t="''"),e="split";else{if("JOIN"!==e)throw Error("Unknown mode: "+e);t||(t="[]"),e="join"}return[t+"."+e+"("+a+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.lists_reverse=function(e){return[(n.javascriptGenerator.valueToCode(e,"LIST",n.javascriptGenerator.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",n.javascriptGenerator.ORDER_FUNCTION_CALL]};n.javascriptGenerator.colour_picker=function(e){return[n.javascriptGenerator.quote_(e.getFieldValue("COLOUR")),n.javascriptGenerator.ORDER_ATOMIC]},n.javascriptGenerator.colour_random=function(e){return[n.javascriptGenerator.provideFunction_("colourRandom",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}() {\n  var num = Math.floor(Math.random() * Math.pow(2, 24));\n  return '#' + ('00000' + num.toString(16)).substr(-6);\n}\n`)+"()",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.colour_rgb=function(e){const t=n.javascriptGenerator.valueToCode(e,"RED",n.javascriptGenerator.ORDER_NONE)||0,a=n.javascriptGenerator.valueToCode(e,"GREEN",n.javascriptGenerator.ORDER_NONE)||0;return e=n.javascriptGenerator.valueToCode(e,"BLUE",n.javascriptGenerator.ORDER_NONE)||0,[n.javascriptGenerator.provideFunction_("colourRgb",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {\n  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\n  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\n  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\n  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\n  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\n  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+t+", "+a+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]},n.javascriptGenerator.colour_blend=function(e){const t=n.javascriptGenerator.valueToCode(e,"COLOUR1",n.javascriptGenerator.ORDER_NONE)||"'#000000'",a=n.javascriptGenerator.valueToCode(e,"COLOUR2",n.javascriptGenerator.ORDER_NONE)||"'#000000'";return e=n.javascriptGenerator.valueToCode(e,"RATIO",n.javascriptGenerator.ORDER_NONE)||.5,[n.javascriptGenerator.provideFunction_("colourBlend",`\nfunction ${n.javascriptGenerator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {\n  ratio = Math.max(Math.min(Number(ratio), 1), 0);\n  var r1 = parseInt(c1.substring(1, 3), 16);\n  var g1 = parseInt(c1.substring(3, 5), 16);\n  var b1 = parseInt(c1.substring(5, 7), 16);\n  var r2 = parseInt(c2.substring(1, 3), 16);\n  var g2 = parseInt(c2.substring(3, 5), 16);\n  var b2 = parseInt(c2.substring(5, 7), 16);\n  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\n  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\n  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\n  r = ('0' + (r || 0).toString(16)).slice(-2);\n  g = ('0' + (g || 0).toString(16)).slice(-2);\n  b = ('0' + (b || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`)+"("+t+", "+a+", "+e+")",n.javascriptGenerator.ORDER_FUNCTION_CALL]};return n.__namespace__=t,n}))},e6e1:function(e,t,n){"use strict";n("9d04")},e868:function(e,t,n){},fc06:function(e,t,n){var a,r,o;(function(i,s){r=[n("b7fd"),n("e5d4")],a=s,o="function"===typeof a?a.apply(t,r):a,void 0===o||(e.exports=o)})(0,(function(e,t){
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
return t}))}}]);